"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[99140],{28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>t});var i=a(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},86571:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"kurs-kali-linux/api-websockets-attacks","title":"\ud83c\udf10 Ataki na API i WebSockets","description":"API i WebSockets s\u0105 powszechnie stosowane w nowoczesnych aplikacjach webowych. Ich podatno\u015bci mog\u0105 prowadzi\u0107 do wycieku danych, eskalacji uprawnie\u0144 i przej\u0119cia sesji u\u017cytkownik\xf3w.","source":"@site/docs/kurs-kali-linux/16-api-websockets-attacks.md","sourceDirName":"kurs-kali-linux","slug":"/kurs-kali-linux/api-websockets-attacks","permalink":"/docs/kurs-kali-linux/api-websockets-attacks","draft":false,"unlisted":false,"editUrl":"https://github.com/przemyslvw/my-page/edit/master/docs/kurs-kali-linux/16-api-websockets-attacks.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"id":"api-websockets-attacks","title":"\ud83c\udf10 Ataki na API i WebSockets","sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)","permalink":"/docs/kurs-kali-linux/2fa-bypass"},"next":{"title":"\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)","permalink":"/docs/kurs-kali-linux/cloud-testing"}}');var s=a(74848),r=a(28453);const o={id:"api-websockets-attacks",title:"\ud83c\udf10 Ataki na API i WebSockets",sidebar_position:16},t="\ud83c\udf10 Ataki na API i WebSockets",c={},l=[{value:"\ud83d\udd0e Testowanie API REST i GraphQL",id:"-testowanie-api-rest-i-graphql",level:2},{value:"<strong>1\ufe0f\u20e3 Wykrywanie API w aplikacji</strong>",id:"1\ufe0f\u20e3-wykrywanie-api-w-aplikacji",level:3},{value:"<strong>2\ufe0f\u20e3 Ataki na API REST</strong>",id:"2\ufe0f\u20e3-ataki-na-api-rest",level:3},{value:"<strong>2.1 IDOR w API</strong>",id:"21-idor-w-api",level:4},{value:"<strong>2.2 Brak ogranicze\u0144 w \u017c\u0105daniach (Rate Limiting Bypass)</strong>",id:"22-brak-ogranicze\u0144-w-\u017c\u0105daniach-rate-limiting-bypass",level:4},{value:"<strong>2.3 Ataki na nag\u0142\xf3wki API (JWT Manipulation)</strong>",id:"23-ataki-na-nag\u0142\xf3wki-api-jwt-manipulation",level:4},{value:"<strong>3\ufe0f\u20e3 Ataki na GraphQL</strong>",id:"3\ufe0f\u20e3-ataki-na-graphql",level:3},{value:"<strong>3.1 Wykrywanie GraphQL</strong>",id:"31-wykrywanie-graphql",level:4},{value:"<strong>3.2 Atak DoS na GraphQL (Deep Query Attack)</strong>",id:"32-atak-dos-na-graphql-deep-query-attack",level:4},{value:"<strong>3.3 Brak kontroli uprawnie\u0144 w GraphQL</strong>",id:"33-brak-kontroli-uprawnie\u0144-w-graphql",level:4},{value:"\ud83d\udd25 Ataki na WebSockets",id:"-ataki-na-websockets",level:2},{value:"<strong>4\ufe0f\u20e3 Przechwytywanie i manipulacja WebSockets</strong>",id:"4\ufe0f\u20e3-przechwytywanie-i-manipulacja-websockets",level:3},{value:"<strong>4.1 IDOR w WebSockets</strong>",id:"41-idor-w-websockets",level:4},{value:"<strong>4.2 WebSocket Injection</strong>",id:"42-websocket-injection",level:4},{value:"<strong>4.3 Brak kontroli autoryzacji w WebSockets</strong>",id:"43-brak-kontroli-autoryzacji-w-websockets",level:4},{value:"\ud83d\udd10 Jak zabezpieczy\u0107 API i WebSockets?",id:"-jak-zabezpieczy\u0107-api-i-websockets",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-ataki-na-api-i-websockets",children:"\ud83c\udf10 Ataki na API i WebSockets"})}),"\n",(0,s.jsx)(n.p,{children:"API i WebSockets s\u0105 powszechnie stosowane w nowoczesnych aplikacjach webowych. Ich podatno\u015bci mog\u0105 prowadzi\u0107 do wycieku danych, eskalacji uprawnie\u0144 i przej\u0119cia sesji u\u017cytkownik\xf3w."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-testowanie-api-rest-i-graphql",children:"\ud83d\udd0e Testowanie API REST i GraphQL"}),"\n",(0,s.jsx)(n.p,{children:"API REST i GraphQL cz\u0119sto posiadaj\u0105 b\u0142\u0119dy zwi\u0105zane z uwierzytelnianiem, autoryzacj\u0105 oraz niew\u0142a\u015bciw\u0105 walidacj\u0105 danych wej\u015bciowych."}),"\n",(0,s.jsx)(n.h3,{id:"1\ufe0f\u20e3-wykrywanie-api-w-aplikacji",children:(0,s.jsx)(n.strong,{children:"1\ufe0f\u20e3 Wykrywanie API w aplikacji"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Sprawdzenie dokumentacji API (np. ",(0,s.jsx)(n.code,{children:"swagger.json"})," lub ",(0,s.jsx)(n.code,{children:"graphql/schema"}),"):"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -s https://example.com/swagger.json\ncurl -s https://example.com/graphql/schema\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Analiza ruchu HTTP w ",(0,s.jsx)(n.strong,{children:"Burp Suite"})," lub ",(0,s.jsx)(n.strong,{children:"mitmproxy"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"2\ufe0f\u20e3-ataki-na-api-rest",children:(0,s.jsx)(n.strong,{children:"2\ufe0f\u20e3 Ataki na API REST"})}),"\n",(0,s.jsx)(n.h4,{id:"21-idor-w-api",children:(0,s.jsx)(n.strong,{children:"2.1 IDOR w API"})}),"\n",(0,s.jsx)(n.p,{children:"Niekt\xf3re API pozwalaj\u0105 na dost\u0119p do zasob\xf3w innych u\u017cytkownik\xf3w poprzez manipulacj\u0119 parametrami:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/user/123/profile\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Je\u015bli zmiana ",(0,s.jsx)(n.code,{children:"123"})," na ",(0,s.jsx)(n.code,{children:"124"})," zwraca dane innego u\u017cytkownika, API jest podatne na IDOR."]}),"\n",(0,s.jsx)(n.h4,{id:"22-brak-ogranicze\u0144-w-\u017c\u0105daniach-rate-limiting-bypass",children:(0,s.jsx)(n.strong,{children:"2.2 Brak ogranicze\u0144 w \u017c\u0105daniach (Rate Limiting Bypass)"})}),"\n",(0,s.jsx)(n.p,{children:"Niekt\xf3re API nie ograniczaj\u0105 liczby \u017c\u0105da\u0144, co umo\u017cliwia ataki brute-force."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"hydra -L users.txt -P passwords.txt https://example.com/api/login -t 10\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,s.jsx)(n.strong,{children:"Ograniczenie liczby pr\xf3b logowania i u\u017cycie CAPTCHA."})]}),"\n",(0,s.jsx)(n.h4,{id:"23-ataki-na-nag\u0142\xf3wki-api-jwt-manipulation",children:(0,s.jsx)(n.strong,{children:"2.3 Ataki na nag\u0142\xf3wki API (JWT Manipulation)"})}),"\n",(0,s.jsx)(n.p,{children:"Tokeny JWT mog\u0105 by\u0107 zmanipulowane, je\u015bli u\u017cywaj\u0105 s\u0142abego klucza."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"jwt_tool mytoken.jwt -d\n"})}),"\n",(0,s.jsx)(n.p,{children:"Atakuj\u0105cy mo\u017ce podmieni\u0107 nag\u0142\xf3wek JWT:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "alg": "none",\n  "typ": "JWT"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Je\u015bli serwer akceptuje niepodpisane tokeny, mo\u017cna przej\u0105\u0107 konto u\u017cytkownika."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"3\ufe0f\u20e3-ataki-na-graphql",children:(0,s.jsx)(n.strong,{children:"3\ufe0f\u20e3 Ataki na GraphQL"})}),"\n",(0,s.jsx)(n.p,{children:"GraphQL pozwala na dynamiczne zapytania, co mo\u017ce prowadzi\u0107 do nieautoryzowanego dost\u0119pu do danych."}),"\n",(0,s.jsx)(n.h4,{id:"31-wykrywanie-graphql",children:(0,s.jsx)(n.strong,{children:"3.1 Wykrywanie GraphQL"})}),"\n",(0,s.jsx)(n.p,{children:"Sprawdzenie endpointu:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://example.com/graphql -d \'{"query":"{__schema{types{name}}}"}\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"Je\u015bli zwr\xf3ci schemat API, aplikacja jest podatna na nadmierne ujawnianie danych."}),"\n",(0,s.jsx)(n.h4,{id:"32-atak-dos-na-graphql-deep-query-attack",children:(0,s.jsx)(n.strong,{children:"3.2 Atak DoS na GraphQL (Deep Query Attack)"})}),"\n",(0,s.jsx)(n.p,{children:"Zapytania mog\u0105 przeci\u0105\u017ca\u0107 serwer:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  user(id: "123") {\n    friends {\n      friends {\n        friends {\n          name\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,s.jsx)(n.strong,{children:"Ograniczenie g\u0142\u0119boko\u015bci zapyta\u0144 i wprowadzenie limit\xf3w."})]}),"\n",(0,s.jsx)(n.h4,{id:"33-brak-kontroli-uprawnie\u0144-w-graphql",children:(0,s.jsx)(n.strong,{children:"3.3 Brak kontroli uprawnie\u0144 w GraphQL"})}),"\n",(0,s.jsx)(n.p,{children:"Je\u015bli GraphQL nie wymaga autoryzacji dla pewnych operacji:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query { allUsers { id, email, password } }\n"})}),"\n",(0,s.jsx)(n.p,{children:"To oznacza, \u017ce dowolny u\u017cytkownik mo\u017ce pobra\u0107 dane wszystkich kont."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-ataki-na-websockets",children:"\ud83d\udd25 Ataki na WebSockets"}),"\n",(0,s.jsx)(n.p,{children:"WebSockets umo\u017cliwiaj\u0105 dwukierunkow\u0105 komunikacj\u0119 w czasie rzeczywistym, ale ich brak walidacji mo\u017ce prowadzi\u0107 do atak\xf3w."}),"\n",(0,s.jsx)(n.h3,{id:"4\ufe0f\u20e3-przechwytywanie-i-manipulacja-websockets",children:(0,s.jsx)(n.strong,{children:"4\ufe0f\u20e3 Przechwytywanie i manipulacja WebSockets"})}),"\n",(0,s.jsx)(n.p,{children:"Przechwycenie ruchu w Burp Suite:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Przejd\u017a do zak\u0142adki ",(0,s.jsx)(n.code,{children:"WebSockets history"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Przechwy\u0107 i zmodyfikuj wiadomo\u015b\u0107 WebSocket."}),"\n",(0,s.jsx)(n.li,{children:"Wys\u0142anie zmienionych danych mo\u017ce ujawni\u0107 podatno\u015b\u0107."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"41-idor-w-websockets",children:(0,s.jsx)(n.strong,{children:"4.1 IDOR w WebSockets"})}),"\n",(0,s.jsx)(n.p,{children:"Podobnie jak w API REST, je\u015bli WebSocket pozwala na zmian\u0119 ID u\u017cytkownika:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{"action":"getUser","id":"123"}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Zmiana ",(0,s.jsx)(n.code,{children:"123"})," na ",(0,s.jsx)(n.code,{children:"124"})," mo\u017ce ujawni\u0107 dane innego u\u017cytkownika."]}),"\n",(0,s.jsx)(n.h4,{id:"42-websocket-injection",children:(0,s.jsx)(n.strong,{children:"4.2 WebSocket Injection"})}),"\n",(0,s.jsx)(n.p,{children:"Niekt\xf3re aplikacje nie waliduj\u0105 poprawnie wej\u015bcia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{"action":"sendMessage","message":"<script>alert(\'XSS\')<\/script>"}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Je\u015bli wiadomo\u015b\u0107 jest wy\u015bwietlana bez sanitacji, mo\u017cliwy jest atak XSS."}),"\n",(0,s.jsx)(n.h4,{id:"43-brak-kontroli-autoryzacji-w-websockets",children:(0,s.jsx)(n.strong,{children:"4.3 Brak kontroli autoryzacji w WebSockets"})}),"\n",(0,s.jsx)(n.p,{children:"Je\u015bli WebSocket nie sprawdza autoryzacji u\u017cytkownika, mo\u017cna wykonywa\u0107 operacje jako inny u\u017cytkownik:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{"action":"transferFunds","amount":10000,"to":"hacker"}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,s.jsx)(n.strong,{children:"Ka\u017cda wiadomo\u015b\u0107 WebSocket powinna by\u0107 podpisana tokenem JWT."})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-jak-zabezpieczy\u0107-api-i-websockets",children:"\ud83d\udd10 Jak zabezpieczy\u0107 API i WebSockets?"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Ogranicz uprawnienia u\u017cytkownik\xf3w i stosuj weryfikacj\u0119 ID w API."}),"\n\u2705 ",(0,s.jsx)(n.strong,{children:"Waliduj dane wej\u015bciowe i nie dopuszczaj do manipulacji tokenami JWT."}),"\n\u2705 ",(0,s.jsx)(n.strong,{children:"Monitoruj ruch API pod k\u0105tem nietypowych \u017c\u0105da\u0144 i pr\xf3b brute-force."}),"\n\u2705 ",(0,s.jsx)(n.strong,{children:"Stosuj uwierzytelnianie dla WebSockets i sprawdzaj sesj\u0119 u\u017cytkownika."}),"\n\u2705 ",(0,s.jsx)(n.strong,{children:"Wprowad\u017a limity zapyta\u0144 dla GraphQL i WebSockets."})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["API i WebSockets s\u0105 kluczowymi elementami aplikacji webowych, ale ich podatno\u015bci mog\u0105 prowadzi\u0107 do powa\u017cnych atak\xf3w. Kolejnym krokiem b\u0119dzie ",(0,s.jsx)(n.strong,{children:"Testowanie aplikacji w chmurze (AWS, Azure, GCP)"}),"! \ud83d\ude80"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);