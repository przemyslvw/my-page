"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[9038],{28453:(e,a,i)=>{i.d(a,{R:()=>r,x:()=>t});var n=i(96540);const s={},o=n.createContext(s);function r(e){const a=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:a},e.children)}},52337:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"kurs-kali-linux/2fa-bypass","title":"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)","description":"Uwierzytelnianie wielosk\u0142adnikowe (2FA) ma na celu zwi\u0119kszenie bezpiecze\u0144stwa u\u017cytkownika poprzez dodatkowy etap weryfikacji, np. kod SMS, aplikacj\u0119 TOTP (Time-Based One-Time Password) lub klucz U2F. Jednak r\xf3\u017cne implementacje 2FA mog\u0105 by\u0107 podatne na obej\u015bcie.","source":"@site/docs/kurs-kali-linux/15-2fa Bypass.md","sourceDirName":"kurs-kali-linux","slug":"/kurs-kali-linux/2fa-bypass","permalink":"/docs/kurs-kali-linux/2fa-bypass","draft":false,"unlisted":false,"editUrl":"https://github.com/przemyslvw/my-page/edit/master/docs/kurs-kali-linux/15-2fa Bypass.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"id":"2fa-bypass","title":"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)","sidebar_position":15},"sidebar":"tutorialSidebar","previous":{"title":"\ud83c\udfad Reverse Shell i Post-Exploitation","permalink":"/docs/kurs-kali-linux/reverse-shell-post-exploitation"},"next":{"title":"\ud83c\udf10 Ataki na API i WebSockets","permalink":"/docs/kurs-kali-linux/api-websockets-attacks"}}');var s=i(74848),o=i(28453);const r={id:"2fa-bypass",title:"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)",sidebar_position:15},t="\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)",l={},c=[{value:"\ud83c\udfad Ataki na TOTP (Time-Based One-Time Password)",id:"-ataki-na-totp-time-based-one-time-password",level:2},{value:"<strong>1\ufe0f\u20e3 Kradzie\u017c tajnego klucza TOTP</strong>",id:"1\ufe0f\u20e3-kradzie\u017c-tajnego-klucza-totp",level:3},{value:"<strong>1.1 Odczytanie klucza TOTP z API</strong>",id:"11-odczytanie-klucza-totp-z-api",level:4},{value:"<strong>1.2 Atak bruteforce na TOTP</strong>",id:"12-atak-bruteforce-na-totp",level:4},{value:"\ud83c\udfa3 Bypass przy u\u017cyciu phishingu",id:"-bypass-przy-u\u017cyciu-phishingu",level:2},{value:"<strong>2\ufe0f\u20e3 Atak na 2FA za pomoc\u0105 narz\u0119dzia Evilginx</strong>",id:"2\ufe0f\u20e3-atak-na-2fa-za-pomoc\u0105-narz\u0119dzia-evilginx",level:3},{value:"<strong>2.1 Konfiguracja ataku</strong>",id:"21-konfiguracja-ataku",level:4},{value:"<strong>2.2 Atak na 2FA za pomoc\u0105 narz\u0119dzia Modlishka</strong>",id:"22-atak-na-2fa-za-pomoc\u0105-narz\u0119dzia-modlishka",level:4},{value:"\ud83d\udd10 Jak zabezpieczy\u0107 si\u0119 przed 2FA Bypass?",id:"-jak-zabezpieczy\u0107-si\u0119-przed-2fa-bypass",level:2}];function d(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"-ataki-na-uwierzytelnianie-wielosk\u0142adnikowe-2fa-bypass",children:"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)"})}),"\n",(0,s.jsx)(a.p,{children:"Uwierzytelnianie wielosk\u0142adnikowe (2FA) ma na celu zwi\u0119kszenie bezpiecze\u0144stwa u\u017cytkownika poprzez dodatkowy etap weryfikacji, np. kod SMS, aplikacj\u0119 TOTP (Time-Based One-Time Password) lub klucz U2F. Jednak r\xf3\u017cne implementacje 2FA mog\u0105 by\u0107 podatne na obej\u015bcie."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{id:"-ataki-na-totp-time-based-one-time-password",children:"\ud83c\udfad Ataki na TOTP (Time-Based One-Time Password)"}),"\n",(0,s.jsx)(a.p,{children:"TOTP to metoda, w kt\xf3rej kody generowane s\u0105 na podstawie zegara systemowego i tajnego klucza. Je\u015bli atakuj\u0105cy przejmie ten klucz, mo\u017ce generowa\u0107 poprawne kody 2FA."}),"\n",(0,s.jsx)(a.h3,{id:"1\ufe0f\u20e3-kradzie\u017c-tajnego-klucza-totp",children:(0,s.jsx)(a.strong,{children:"1\ufe0f\u20e3 Kradzie\u017c tajnego klucza TOTP"})}),"\n",(0,s.jsx)(a.p,{children:"Niekt\xf3re aplikacje mog\u0105 wycieka\u0107 sekretny klucz TOTP, np. poprzez:"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Niezabezpieczone API"})," \u2013 wyciek klucza podczas rejestracji 2FA"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"S\u0142abe zabezpieczenia aplikacji mobilnych"})," \u2013 ekstrakcja z aplikacji przez in\u017cynieri\u0119 wsteczn\u0105"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Z\u0142amanie backup\xf3w konfiguracji"})," \u2013 klucz mo\u017ce by\u0107 zapisany w bazie danych u\u017cytkownika"]}),"\n"]}),"\n",(0,s.jsx)(a.h4,{id:"11-odczytanie-klucza-totp-z-api",children:(0,s.jsx)(a.strong,{children:"1.1 Odczytanie klucza TOTP z API"})}),"\n",(0,s.jsx)(a.p,{children:"Je\u015bli aplikacja zwraca tajny klucz przez API, mo\u017cna go przechwyci\u0107 w Burp Suite:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-http",children:'GET /api/2fa/setup\nResponse: {"secret": "JBSWY3DPEHPK3PXP"}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Nast\u0119pnie klucz mo\u017cna wprowadzi\u0107 do aplikacji Google Authenticator, aby generowa\u0107 poprawne kody."}),"\n",(0,s.jsx)(a.h4,{id:"12-atak-bruteforce-na-totp",children:(0,s.jsx)(a.strong,{children:"1.2 Atak bruteforce na TOTP"})}),"\n",(0,s.jsx)(a.p,{children:"TOTP generuje kody co 30 sekund, co daje atakuj\u0105cemu ograniczon\u0105 liczb\u0119 mo\u017cliwych warto\u015bci (np. 1 000 000 kod\xf3w dla 6 cyfr). Niekt\xf3re aplikacje nie blokuj\u0105 zbyt wielu pr\xf3b."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"python totp_bruteforce.py --target example.com --user admin\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Rozwi\u0105zanie: ",(0,s.jsx)(a.strong,{children:"Blokada po kilku nieudanych pr\xf3bach oraz wykrywanie podejrzanych logowa\u0144"}),"."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{id:"-bypass-przy-u\u017cyciu-phishingu",children:"\ud83c\udfa3 Bypass przy u\u017cyciu phishingu"}),"\n",(0,s.jsx)(a.p,{children:"Phishing to jedna z najcz\u0119\u015bciej wykorzystywanych metod do obej\u015bcia 2FA."}),"\n",(0,s.jsx)(a.h3,{id:"2\ufe0f\u20e3-atak-na-2fa-za-pomoc\u0105-narz\u0119dzia-evilginx",children:(0,s.jsx)(a.strong,{children:"2\ufe0f\u20e3 Atak na 2FA za pomoc\u0105 narz\u0119dzia Evilginx"})}),"\n",(0,s.jsx)(a.p,{children:"Evilginx to narz\u0119dzie proxy MITM, kt\xf3re pozwala na przechwycenie kod\xf3w 2FA oraz sesji u\u017cytkownika."}),"\n",(0,s.jsx)(a.h4,{id:"21-konfiguracja-ataku",children:(0,s.jsx)(a.strong,{children:"2.1 Konfiguracja ataku"})}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsx)(a.li,{children:"Uruchomienie Evilginx:"}),"\n"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"git clone https://github.com/kgretzky/evilginx2.git\ncd evilginx2 && make install\n"})}),"\n",(0,s.jsxs)(a.ol,{start:"2",children:["\n",(0,s.jsx)(a.li,{children:"Konfiguracja hosta phishingowego:"}),"\n"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"config domain phishing.example.com\n"})}),"\n",(0,s.jsxs)(a.ol,{start:"3",children:["\n",(0,s.jsx)(a.li,{children:"Uruchomienie ataku na Google:"}),"\n"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"phishlets enable google\nphishlets hostname google phishing.example.com\n"})}),"\n",(0,s.jsxs)(a.ol,{start:"4",children:["\n",(0,s.jsx)(a.li,{children:"Atakuj\u0105cy wysy\u0142a ofierze link phishingowy."}),"\n",(0,s.jsx)(a.li,{children:"Po zalogowaniu u\u017cytkownika Evilginx przechwytuje sesj\u0119 i kod 2FA."}),"\n"]}),"\n",(0,s.jsx)(a.h4,{id:"22-atak-na-2fa-za-pomoc\u0105-narz\u0119dzia-modlishka",children:(0,s.jsx)(a.strong,{children:"2.2 Atak na 2FA za pomoc\u0105 narz\u0119dzia Modlishka"})}),"\n",(0,s.jsxs)(a.p,{children:["Alternatywnym narz\u0119dziem do przechwycenia 2FA jest ",(0,s.jsx)(a.strong,{children:"Modlishka"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"git clone https://github.com/drk1wi/Modlishka.git\ncd Modlishka && go build\n./Modlishka -config config.json\n"})}),"\n",(0,s.jsx)(a.p,{children:"U\u017cytkownik my\u015bli, \u017ce loguje si\u0119 do prawdziwej strony, ale Modlishka przechwytuje jego dane i kody 2FA."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{id:"-jak-zabezpieczy\u0107-si\u0119-przed-2fa-bypass",children:"\ud83d\udd10 Jak zabezpieczy\u0107 si\u0119 przed 2FA Bypass?"}),"\n",(0,s.jsxs)(a.p,{children:["\u2705 ",(0,s.jsx)(a.strong,{children:"U\u017cywaj kluczy U2F/FIDO zamiast TOTP"})," \u2013 nie mo\u017cna ich przechwyci\u0107 przez phishing.\n\u2705 ",(0,s.jsx)(a.strong,{children:"Wykrywaj anomalie logowania"})," \u2013 analiza geolokalizacji i nowych urz\u0105dze\u0144.\n\u2705 ",(0,s.jsx)(a.strong,{children:"Blokuj logowanie na nowych urz\u0105dzeniach bez dodatkowej weryfikacji"}),".\n\u2705 ",(0,s.jsx)(a.strong,{children:"Monitoruj ruch DNS i adresy URL"})," \u2013 wykrywanie fa\u0142szywych domen.\n\u2705 ",(0,s.jsx)(a.strong,{children:"Edukacja u\u017cytkownik\xf3w o zagro\u017ceniach phishingowych"}),"."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsxs)(a.p,{children:["Ataki na 2FA s\u0105 coraz cz\u0119stsze i mog\u0105 prowadzi\u0107 do przej\u0119cia kont nawet w dobrze zabezpieczonych systemach. Kolejnym krokiem b\u0119dzie analiza podatno\u015bci ",(0,s.jsx)(a.strong,{children:"Ataki na API i WebSockets"}),"! \ud83d\ude80"]})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);