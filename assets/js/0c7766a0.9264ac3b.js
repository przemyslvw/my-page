"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[19709],{16262:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var i=n(76611),o=n(74848),t=n(28453);const r={slug:"http-evolution-2026",title:"Ewolucja HTTP (1.1 vs 2.0 vs 3.0) \u2013 Od czystego tekstu do zaszyfrowanych dron\xf3w",authors:["przemyslvw"],tags:["web-security","http","http2","http3","tls","quic","crlf","owasp"],date:"2026-02-14"},s=void 0,c={authorsImageUrls:[void 0]},l=[];function p(e){const a={code:"code",em:"em",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.p,{children:"Zanim przejdziemy do kodu, wyja\u015bnijmy r\xf3\u017cnice mi\u0119dzy wersjami protoko\u0142u HTTP tak, aby zrozumia\u0142 to ka\u017cdy \u2013 od junior frontendowca po project managera. R\xf3\u017cnice te maj\u0105 kolosalne znaczenie dla bezpiecze\u0144stwa."}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"HTTP/1.1 (Era tekstu i kolejek):"})," Wyobra\u017a sobie, \u017ce wysy\u0142asz poczt\xf3wk\u0119. Wszystko jest zapisane czystym, zrozumia\u0142ym dla cz\u0142owieka tekstem (nag\u0142\xf3wki, tre\u015b\u0107). Je\u015bli chcesz pobra\u0107 10 obrazk\xf3w ze strony, przegl\u0105darka musi wysy\u0142a\u0107 zapytania jedno po drugim (lub otwiera\u0107 wiele ci\u0119\u017ckich po\u0142\u0105cze\u0144).","\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.em,{children:"Bezpiecze\u0144stwo:"})," Protok\xf3\u0142 sam w sobie ",(0,o.jsx)(a.strong,{children:"nie wymusza szyfrowania"})," (mo\u017cna go u\u017cywa\u0107 po zwyk\u0142ym http://). Tekstowa natura sprawia, \u017ce jest podatny na wstrzykiwanie znak\xf3w specjalnych i manipulacje (np. HTTP Request Smuggling, gdzie atakuj\u0105cy oszukuje serwer co do tego, gdzie ko\u0144czy si\u0119 jedno \u017c\u0105danie, a zaczyna drugie)."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"HTTP/2 (Era binarna i multipleksowania):"})," Zamiast poczt\xf3wek, wysy\u0142asz zapiecz\u0119towan\u0105 paczk\u0119 kuriersk\u0105 z przegr\xf3dkami. Dane nie s\u0105 ju\u017c czytelnym tekstem, ale ustandaryzowanymi ",(0,o.jsx)(a.strong,{children:"ramkami binarnymi"})," (0 i 1). W ramach jednego po\u0142\u0105czenia TCP (jednej paczki) przegl\u0105darka pobiera wszystkie obrazki i skrypty naraz (multipleksowanie).","\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.em,{children:"Bezpiecze\u0144stwo:"})," Cho\u0107 standard na to pozwala, w praktyce przegl\u0105darki ",(0,o.jsx)(a.strong,{children:"wymuszaj\u0105 szyfrowanie (TLS)"}),' dla HTTP/2 (tzw. h2). Binarna struktura ramek natywnie leczy nas z podatno\u015bci opartych na wstrzykiwaniu tekstu, jednak rodzi nowe wektory atak\xf3w (np. s\u0142ynny atak DoS "Rapid Reset", polegaj\u0105cy na masowym otwieraniu i zamykaniu ramek strumieni).']}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"HTTP/3 (Era QUIC i wbudowanej kryptografii):"})," Ca\u0142kowita rewolucja. Zamiast ci\u0119\u017car\xf3wki (TCP), kt\xf3ra staje w korku, gdy zgubi si\u0119 cho\u0107by jedna paczka, u\u017cywamy roju niezale\u017cnych dron\xf3w opartych na protokole UDP (tzw. QUIC). Je\u015bli jeden dron (pakiet) spadnie, reszta leci dalej.","\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.em,{children:"Bezpiecze\u0144stwo:"})," ",(0,o.jsx)(a.strong,{children:"Szyfrowanie (TLS 1.3) jest wbudowane na twardo w sam fundament protoko\u0142u transportowego."})," W HTTP/3 nie da si\u0119 wys\u0142a\u0107 czystego tekstu. Ca\u0142y proces negocjacji po\u0142\u0105czenia i szyfrowania odbywa si\u0119 b\u0142yskawicznie w jednym kroku."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Aby pokaza\u0107, dlaczego tekstowa natura HTTP/1.1 bywa katastrofalna i dlaczego przej\u015bcie na protoko\u0142y binarne (HTTP/2/3) by\u0142o konieczne, sp\xf3jrzmy na klasyczn\u0105 podatno\u015b\u0107 CRLF Injection."}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.strong,{children:"Dlaczego tekstowy HTTP/1.1 jest niebezpieczny: HTTP Response Splitting (CRLF)"})}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.strong,{children:"Definicja (Co to jest?)"})}),"\n",(0,o.jsx)(a.p,{children:'W tekstowym protokole HTTP/1.1, znaki nowej linii (CRLF - \\r\\n) s\u0142u\u017c\u0105 do oddzielania od siebie nag\u0142\xf3wk\xf3w oraz cia\u0142a odpowiedzi. Je\u015bli aplikacja pobiera dane od u\u017cytkownika (np. adres URL do przekierowania) i wstawia je bezpo\u015brednio do nag\u0142\xf3wk\xf3w bez weryfikacji, atakuj\u0105cy mo\u017ce wstrzykn\u0105\u0107 w\u0142asne znaki \\r\\n. Pozwala to na "przeci\u0119cie" odpowiedzi na p\xf3\u0142 i wstrzykni\u0119cie w\u0142asnych, z\u0142o\u015bliwych nag\u0142\xf3wk\xf3w (np. nadpisuj\u0105cych ciasteczka) lub ca\u0142ego cia\u0142a strony. HTTP/2 jest na to domy\u015blnie odporny dzi\u0119ki ramkowaniu binarnemu i kompresji nag\u0142\xf3wk\xf3w HPACK.'}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.strong,{children:"Scenariusz z \u017cycia (Vulnerable Code)"})}),"\n",(0,o.jsx)(a.p,{children:"Deweloper tworzy prosty endpoint do przekierowywania u\u017cytkownik\xf3w po zalogowaniu, u\u017cywaj\u0105c surowej odpowiedzi frameworka."}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:"# Python / Flask - Podatne przekierowanie HTTP/1.1  \n@app.route('/redirect')  \ndef login_redirect():  \n    target_url = request.args.get('next')  \n    # Podatno\u015b\u0107: Brak sanityzacji payloadu wej\u015bciowego.   \n    # Znaki nowej linii z parametru trafi\u0105 prosto do nag\u0142\xf3wka HTTP.  \n    return Response(status=302, headers={'Location': target_url})\n"})}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.strong,{children:"Exploit (Jak to hakujemy)"})}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:["Znajduj\u0119 podatny parametr ",(0,o.jsx)(a.code,{children:"next"}),"."]}),"\n",(0,o.jsxs)(a.li,{children:["Zamiast zwyk\u0142ego linku, konstruuj\u0119 z\u0142o\u015bliwy payload zawieraj\u0105cy zakodowane w URL znaki nowej linii ",(0,o.jsx)(a.code,{children:"%0d%0a"})," (czyli ",(0,o.jsx)(a.code,{children:"\\r\\n"}),"):\n",(0,o.jsx)(a.code,{children:"https://target.com/redirect?next=http://example.com%0d%0aSet-Cookie:%20admin=1;%20Secure"})]}),"\n",(0,o.jsx)(a.li,{children:"Wysy\u0142am link ofierze."}),"\n",(0,o.jsxs)(a.li,{children:["Podatny serwer generuje tekstow\u0105 odpowied\u017a HTTP/1.1. Przez wstrzykni\u0119te znaki przegl\u0105darka ofiary interpretuje to tak:","\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-http",children:"HTTP/1.1 302 Found  \nLocation: http://example.com  \nSet-Cookie: admin=1; Secure\n"})}),"\n"]}),"\n",(0,o.jsx)(a.li,{children:"Z\u0142o\u015bliwe ciasteczko zostaje osadzone w przegl\u0105darce ofiary. Z\u0142amali\u015bmy struktur\u0119 protoko\u0142u jednym parametrem."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:(0,o.jsx)(a.strong,{children:"Secure Code (Jak to naprawi\u0107)"})}),"\n",(0,o.jsx)(a.p,{children:'Na poziomie kodu musimy kategorycznie wycina\u0107 lub kodowa\u0107 znaki kontrolne. Dodatkowo w architekturze "Automation First" powinni\u015bmy wdro\u017cy\u0107 testy integracyjne sprawdzaj\u0105ce reakcj\u0119 aplikacji na payloady zawieraj\u0105ce CRLF.'}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-python",children:"# Python / Flask - Zabezpieczone przekierowanie  \n@app.route('/redirect')  \ndef login_redirect():  \n    target_url = request.args.get('next')  \n      \n    # Zabezpieczenie: Agresywne usuni\u0119cie znak\xf3w kontrolnych \\r i \\n  \n    # W nowoczesnych frameworkach robi\u0105 to wbudowane biblioteki (np. werkzeug)  \n    if target_url:  \n        target_url = target_url.replace('\\r', '').replace('\\n', '')  \n          \n    return Response(status=302, headers={'Location': target_url})\n"})})]})}function d(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>r,x:()=>s});var i=n(96540);const o={},t=i.createContext(o);function r(e){const a=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:a},e.children)}},76611:e=>{e.exports=JSON.parse('{"permalink":"/blog/http-evolution-2026","editUrl":"https://github.com/przemyslvw/my-page/edit/master/blog/2026-02-14/index.md","source":"@site/blog/2026-02-14/index.md","title":"Ewolucja HTTP (1.1 vs 2.0 vs 3.0) \u2013 Od czystego tekstu do zaszyfrowanych dron\xf3w","description":"Zanim przejdziemy do kodu, wyja\u015bnijmy r\xf3\u017cnice mi\u0119dzy wersjami protoko\u0142u HTTP tak, aby zrozumia\u0142 to ka\u017cdy \u2013 od junior frontendowca po project managera. R\xf3\u017cnice te maj\u0105 kolosalne znaczenie dla bezpiecze\u0144stwa.","date":"2026-02-14T00:00:00.000Z","tags":[{"inline":false,"label":"Web Security","permalink":"/blog/tags/web-security","description":"Praktyki, narz\u0119dzia i techniki zabezpieczania aplikacji webowych."},{"inline":false,"label":"HTTP","permalink":"/blog/tags/http","description":"Podstawy protoko\u0142u HTTP i jego mechanizmy."},{"inline":false,"label":"HTTP/2","permalink":"/blog/tags/http2","description":"Wersja 2 protoko\u0142u HTTP, ramkowanie binarne i multipleksowanie."},{"inline":false,"label":"HTTP/3","permalink":"/blog/tags/http3","description":"Wersja 3 protoko\u0142u HTTP oparta na QUIC."},{"inline":false,"label":"TLS","permalink":"/blog/tags/tls","description":"Transport Layer Security i szyfrowanie po\u0142\u0105cze\u0144."},{"inline":false,"label":"QUIC","permalink":"/blog/tags/quic","description":"Bezpieczny i wydajny protok\xf3\u0142 transportowy oparty na UDP."},{"inline":false,"label":"CRLF","permalink":"/blog/tags/crlf","description":"Wstrzykiwanie znak\xf3w powrotu karetki i nowej linii."},{"inline":false,"label":"OWASP","permalink":"/blog/tags/owasp","description":"Open Web Application Security Project i jego wytyczne."}],"readingTime":2.975,"hasTruncateMarker":true,"authors":[{"name":"Przemys\u0142aw Majdak","title":"Full-Stack Developer, Automation Engineer & Web Security Specialist","url":"https://www.majdak.online","bio":"In\u017cynier aplikacji internetowych, specjalista ds. automatyzacji test\xf3w i bezpiecze\u0144stwa IT.","socials":{"github":"https://github.com/przemyslvw","instagram":"https://www.instagram.com/przemas.ts","x":"https://x.com/przemyslvw","garmin":"https://connect.garmin.com/modern/profile/396bbbd1-edbd-4fd4-a780-132723eef739"},"imageURL":"https://avatars.githubusercontent.com/u/31745530?v=4","key":"przemyslvw","page":null}],"frontMatter":{"slug":"http-evolution-2026","title":"Ewolucja HTTP (1.1 vs 2.0 vs 3.0) \u2013 Od czystego tekstu do zaszyfrowanych dron\xf3w","authors":["przemyslvw"],"tags":["web-security","http","http2","http3","tls","quic","crlf","owasp"],"date":"2026-02-14"},"unlisted":false,"nextItem":{"title":"CORS (Cross-Origin Resource Sharing) w 2026 roku \u2013 wy\u0142omy i tarcza SameSite","permalink":"/blog/cors-cross-origin-resource-sharing-2026"}}')}}]);