"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[744],{15984:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"kurs-kali-linux/cloud-testing","title":"\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)","description":"Aplikacje wdra\u017cane w chmurze cz\u0119sto cierpi\u0105 na b\u0142\u0119dne konfiguracje oraz niew\u0142a\u015bciwie skonfigurowane uprawnienia, co mo\u017ce prowadzi\u0107 do przej\u0119cia zasob\xf3w, wycieku danych oraz eskalacji uprawnie\u0144 w \u015brodowisku chmurowym.","source":"@site/docs/kurs-kali-linux/17-cloud-testing.md","sourceDirName":"kurs-kali-linux","slug":"/kurs-kali-linux/cloud-testing","permalink":"/docs/kurs-kali-linux/cloud-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/przemyslvw/my-page/edit/master/docs/kurs-kali-linux/17-cloud-testing.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"id":"cloud-testing","title":"\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)","sidebar_position":17},"sidebar":"tutorialSidebar","previous":{"title":"\ud83c\udf10 Ataki na API i WebSockets","permalink":"/docs/kurs-kali-linux/api-websockets-attacks"},"next":{"title":"\ud83d\udee0\ufe0f Case Studies i \u0107wiczenia praktyczne","permalink":"/docs/kurs-kali-linux/case-studies-practice"}}');var c=i(74848),r=i(28453);const s={id:"cloud-testing",title:"\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)",sidebar_position:17},o="\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)",l={},d=[{value:"\ud83d\udd0d B\u0142\u0119dne konfiguracje chmury",id:"-b\u0142\u0119dne-konfiguracje-chmury",level:2},{value:"<strong>1\ufe0f\u20e3 Publiczne zasoby S3 w AWS</strong>",id:"1\ufe0f\u20e3-publiczne-zasoby-s3-w-aws",level:3},{value:"<strong>1.1 Wyszukiwanie publicznych bucket\xf3w S3</strong>",id:"11-wyszukiwanie-publicznych-bucket\xf3w-s3",level:4},{value:"<strong>1.2 Sprawdzanie b\u0142\u0119dnie skonfigurowanych CDN (CloudFront)</strong>",id:"12-sprawdzanie-b\u0142\u0119dnie-skonfigurowanych-cdn-cloudfront",level:4},{value:"<strong>2\ufe0f\u20e3 Niew\u0142a\u015bciwe konfiguracje baz danych w chmurze</strong>",id:"2\ufe0f\u20e3-niew\u0142a\u015bciwe-konfiguracje-baz-danych-w-chmurze",level:3},{value:"<strong>2.1 Wyszukiwanie otwartych baz danych MongoDB</strong>",id:"21-wyszukiwanie-otwartych-baz-danych-mongodb",level:4},{value:"<strong>2.2 Sprawdzanie publicznych baz danych w Google Cloud</strong>",id:"22-sprawdzanie-publicznych-baz-danych-w-google-cloud",level:4},{value:"\ud83d\udd25 IAM Privilege Escalation",id:"-iam-privilege-escalation",level:2},{value:"<strong>3\ufe0f\u20e3 Wyszukiwanie nadmiernych uprawnie\u0144 IAM w AWS</strong>",id:"3\ufe0f\u20e3-wyszukiwanie-nadmiernych-uprawnie\u0144-iam-w-aws",level:3},{value:"<strong>4\ufe0f\u20e3 Przej\u0119cie roli IAM w Google Cloud</strong>",id:"4\ufe0f\u20e3-przej\u0119cie-roli-iam-w-google-cloud",level:3},{value:"\ud83d\udd10 Jak zabezpieczy\u0107 aplikacje w chmurze?",id:"-jak-zabezpieczy\u0107-aplikacje-w-chmurze",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\ufe0f-testowanie-aplikacji-w-chmurze-aws-azure-gcp",children:"\u2601\ufe0f Testowanie aplikacji w chmurze (AWS, Azure, GCP)"})}),"\n",(0,c.jsx)(n.p,{children:"Aplikacje wdra\u017cane w chmurze cz\u0119sto cierpi\u0105 na b\u0142\u0119dne konfiguracje oraz niew\u0142a\u015bciwie skonfigurowane uprawnienia, co mo\u017ce prowadzi\u0107 do przej\u0119cia zasob\xf3w, wycieku danych oraz eskalacji uprawnie\u0144 w \u015brodowisku chmurowym."}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"-b\u0142\u0119dne-konfiguracje-chmury",children:"\ud83d\udd0d B\u0142\u0119dne konfiguracje chmury"}),"\n",(0,c.jsx)(n.h3,{id:"1\ufe0f\u20e3-publiczne-zasoby-s3-w-aws",children:(0,c.jsx)(n.strong,{children:"1\ufe0f\u20e3 Publiczne zasoby S3 w AWS"})}),"\n",(0,c.jsx)(n.p,{children:"Amazon S3 to popularna us\u0142uga przechowywania danych, ale cz\u0119sto zdarza si\u0119, \u017ce zasoby s\u0105 udost\u0119pnione publicznie."}),"\n",(0,c.jsx)(n.h4,{id:"11-wyszukiwanie-publicznych-bucket\xf3w-s3",children:(0,c.jsx)(n.strong,{children:"1.1 Wyszukiwanie publicznych bucket\xf3w S3"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"aws s3 ls s3://example-bucket --no-sign-request\n"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli bucket jest publiczny, mo\u017cna pobra\u0107 jego zawarto\u015b\u0107:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"aws s3 cp s3://example-bucket/secrets.txt . --no-sign-request\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,c.jsxs)(n.strong,{children:["Ustaw polityki dost\u0119pu do bucket\xf3w S3 na ",(0,c.jsx)(n.code,{children:"private"})," i ogranicz dost\u0119p tylko do autoryzowanych u\u017cytkownik\xf3w."]})]}),"\n",(0,c.jsx)(n.h4,{id:"12-sprawdzanie-b\u0142\u0119dnie-skonfigurowanych-cdn-cloudfront",children:(0,c.jsx)(n.strong,{children:"1.2 Sprawdzanie b\u0142\u0119dnie skonfigurowanych CDN (CloudFront)"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli serwer backendowy jest publicznie dost\u0119pny, mo\u017cna spr\xf3bowa\u0107 go wywo\u0142a\u0107 bezpo\u015brednio:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"curl -I https://backend.example.com\n"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli serwer odpowiada, oznacza to, \u017ce mo\u017ce by\u0107 podatny na ataki SSRF lub eksfiltracj\u0119 danych."}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"2\ufe0f\u20e3-niew\u0142a\u015bciwe-konfiguracje-baz-danych-w-chmurze",children:(0,c.jsx)(n.strong,{children:"2\ufe0f\u20e3 Niew\u0142a\u015bciwe konfiguracje baz danych w chmurze"})}),"\n",(0,c.jsx)(n.p,{children:"Bazy danych w chmurze cz\u0119sto s\u0105 b\u0142\u0119dnie skonfigurowane, umo\u017cliwiaj\u0105c nieautoryzowany dost\u0119p."}),"\n",(0,c.jsx)(n.h4,{id:"21-wyszukiwanie-otwartych-baz-danych-mongodb",children:(0,c.jsx)(n.strong,{children:"2.1 Wyszukiwanie otwartych baz danych MongoDB"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"nmap -p 27017 --script mongodb-info example.com\n"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli baza zwraca dane, mo\u017cna pr\xf3bowa\u0107 uzyska\u0107 dost\u0119p:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"mongo --host example.com --port 27017\nshow dbs;\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,c.jsx)(n.strong,{children:"W\u0142\u0105cz autoryzacj\u0119 i ogranicz dost\u0119p do bazy do konkretnych adres\xf3w IP."})]}),"\n",(0,c.jsx)(n.h4,{id:"22-sprawdzanie-publicznych-baz-danych-w-google-cloud",children:(0,c.jsx)(n.strong,{children:"2.2 Sprawdzanie publicznych baz danych w Google Cloud"})}),"\n",(0,c.jsx)(n.p,{children:"Google Cloud SQL mo\u017ce by\u0107 podatne, je\u015bli nie wymusza autoryzacji IP:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud sql instances list --project=my-project\n"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli instancja jest widoczna publicznie, mo\u017cna spr\xf3bowa\u0107 nawi\u0105za\u0107 po\u0142\u0105czenie:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud sql connect my-instance --user=root\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,c.jsx)(n.strong,{children:"Ustaw ograniczenia dost\u0119pu i wymu\u015b uwierzytelnianie kluczem."})]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"-iam-privilege-escalation",children:"\ud83d\udd25 IAM Privilege Escalation"}),"\n",(0,c.jsx)(n.p,{children:"IAM (Identity and Access Management) jest kluczowym mechanizmem kontroli dost\u0119pu w chmurze, ale niew\u0142a\u015bciwe konfiguracje mog\u0105 pozwoli\u0107 atakuj\u0105cym na eskalacj\u0119 uprawnie\u0144."}),"\n",(0,c.jsx)(n.h3,{id:"3\ufe0f\u20e3-wyszukiwanie-nadmiernych-uprawnie\u0144-iam-w-aws",children:(0,c.jsx)(n.strong,{children:"3\ufe0f\u20e3 Wyszukiwanie nadmiernych uprawnie\u0144 IAM w AWS"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli u\u017cytkownik ma mo\u017cliwo\u015b\u0107 modyfikowania w\u0142asnych uprawnie\u0144, mo\u017ce uzyska\u0107 dost\u0119p administracyjny:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"aws iam list-policies --scope Local\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Je\u015bli znajdziemy polityk\u0119 ",(0,c.jsx)(n.code,{children:"iam:PutUserPolicy"}),", mo\u017cna doda\u0107 w\u0142asne uprawnienia:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'aws iam put-user-policy --user-name hacker --policy-name escalated --policy-document \'{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":"*","Resource":"*"}]}\'\n'})}),"\n",(0,c.jsxs)(n.p,{children:["Teraz u\u017cytkownik ",(0,c.jsx)(n.code,{children:"hacker"})," ma pe\u0142ne uprawnienia."]}),"\n",(0,c.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,c.jsxs)(n.strong,{children:["Ograniczenie uprawnie\u0144 IAM poprzez zasady ",(0,c.jsx)(n.code,{children:"least privilege"}),"."]})]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"4\ufe0f\u20e3-przej\u0119cie-roli-iam-w-google-cloud",children:(0,c.jsx)(n.strong,{children:"4\ufe0f\u20e3 Przej\u0119cie roli IAM w Google Cloud"})}),"\n",(0,c.jsx)(n.p,{children:"Je\u015bli u\u017cytkownik mo\u017ce edytowa\u0107 role IAM, mo\u017ce doda\u0107 si\u0119 do grupy administrator\xf3w:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gcloud projects add-iam-policy-binding my-project \\\n    --member=user:hacker@example.com --role=roles/owner\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Teraz ",(0,c.jsx)(n.code,{children:"hacker@example.com"})," ma pe\u0142ne uprawnienia do projektu."]}),"\n",(0,c.jsxs)(n.p,{children:["Rozwi\u0105zanie: ",(0,c.jsxs)(n.strong,{children:["U\u017cywanie zasad ",(0,c.jsx)(n.code,{children:"deny policy"})," i regularny audyt uprawnie\u0144 IAM."]})]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"-jak-zabezpieczy\u0107-aplikacje-w-chmurze",children:"\ud83d\udd10 Jak zabezpieczy\u0107 aplikacje w chmurze?"}),"\n",(0,c.jsxs)(n.p,{children:["\u2705 ",(0,c.jsx)(n.strong,{children:"Regularnie audytuj konfiguracje S3, baz danych i us\u0142ug sieciowych."}),"\n\u2705 ",(0,c.jsx)(n.strong,{children:"Ogranicz uprawnienia IAM do absolutnego minimum."}),"\n\u2705 ",(0,c.jsx)(n.strong,{children:"W\u0142\u0105cz monitoring i alertowanie dla nietypowych dzia\u0142a\u0144."}),"\n\u2705 ",(0,c.jsx)(n.strong,{children:"U\u017cywaj narz\u0119dzi typu AWS GuardDuty, Google Security Command Center do wykrywania zagro\u017ce\u0144."}),"\n\u2705 ",(0,c.jsxs)(n.strong,{children:["Blokuj dost\u0119p do metadanych instancji (",(0,c.jsx)(n.code,{children:"169.254.169.254"}),") w ramach ochrony przed SSRF."]})]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsxs)(n.p,{children:["Testowanie aplikacji w chmurze jest kluczowe dla bezpiecze\u0144stwa infrastruktury IT. Kolejnym krokiem b\u0119dzie analiza podatno\u015bci ",(0,c.jsx)(n.strong,{children:"Case Studies i \u0107wiczenia praktyczne"}),"! \ud83d\ude80"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var a=i(96540);const c={},r=a.createContext(c);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);