"use strict";(self.webpackChunkmy_page=self.webpackChunkmy_page||[]).push([[57164],{22391:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"kurs-owasp/testowanie-podatnosci/a10-ssrf-cwiczenie","title":"Praktyczne \u0107wiczenie: Testowanie i mitigacja","description":"\ud83c\udfaf Cel \u0107wiczenia","source":"@site/docs/kurs-owasp/03-testowanie-podatnosci/a10-ssrf-cwiczenie.md","sourceDirName":"kurs-owasp/03-testowanie-podatnosci","slug":"/kurs-owasp/testowanie-podatnosci/a10-ssrf-cwiczenie","permalink":"/docs/kurs-owasp/testowanie-podatnosci/a10-ssrf-cwiczenie","draft":false,"unlisted":false,"editUrl":"https://github.com/przemyslvw/my-page/edit/master/docs/kurs-owasp/03-testowanie-podatnosci/a10-ssrf-cwiczenie.md","tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"id":"a10-ssrf-cwiczenie","title":"Praktyczne \u0107wiczenie: Testowanie i mitigacja","sidebar_position":50},"sidebar":"tutorialSidebar","previous":{"title":"Narz\u0119dzia do testowania","permalink":"/docs/kurs-owasp/testowanie-podatnosci/a10-ssrf-narzedzia"},"next":{"title":"04 Raport bezpiecze\u0144stwa","permalink":"/docs/category/04-raport-bezpiecze\u0144stwa"}}');var s=n(74848),r=n(28453);const o={id:"a10-ssrf-cwiczenie",title:"Praktyczne \u0107wiczenie: Testowanie i mitigacja",sidebar_position:50},t="\ud83e\uddea Praktyczne \u0107wiczenie: Testowanie i mitigacja \u2013 Server-Side Request Forgery (SSRF) (A10:2025)",c={},l=[{value:"\ud83c\udfaf Cel \u0107wiczenia",id:"-cel-\u0107wiczenia",level:2},{value:"\ud83d\udee0\ufe0f Scenariusz testowy",id:"\ufe0f-scenariusz-testowy",level:2},{value:"Aplikacja:",id:"aplikacja",level:3},{value:"\ud83d\udd0d Krok po kroku: testowanie SSRF",id:"-krok-po-kroku-testowanie-ssrf",level:2},{value:"1. Wst\u0119pna analiza",id:"1-wst\u0119pna-analiza",level:3},{value:"2. Weryfikacja SSRF przez narz\u0119dzia",id:"2-weryfikacja-ssrf-przez-narz\u0119dzia",level:3},{value:"3. Eskalacja \u2013 atak na metadata service",id:"3-eskalacja--atak-na-metadata-service",level:3},{value:"\u2705 Mitigacja",id:"-mitigacja",level:2},{value:"\ud83d\udd10 Wnioski",id:"-wnioski",level:2},{value:"\ud83c\udfaf Cel",id:"-cel",level:2},{value:"\ud83e\uddea Scenariusz",id:"-scenariusz",level:2},{value:"\u015arodowisko testowe:",id:"\u015brodowisko-testowe",level:3},{value:"\ud83d\udd0d Krok po kroku",id:"-krok-po-kroku",level:2},{value:"1. Uruchom serwer rejestruj\u0105cy (Interactsh)",id:"1-uruchom-serwer-rejestruj\u0105cy-interactsh",level:3},{value:"2. Podstawowy test SSRF",id:"2-podstawowy-test-ssrf",level:3},{value:"3. Test SSRF z nietypowymi protoko\u0142ami",id:"3-test-ssrf-z-nietypowymi-protoko\u0142ami",level:3},{value:"4. Test za pomoc\u0105 narz\u0119dzia SSRFmap",id:"4-test-za-pomoc\u0105-narz\u0119dzia-ssrfmap",level:3},{value:"\u2705 Cel \u0107wiczenia zosta\u0142 osi\u0105gni\u0119ty, je\u015bli:",id:"-cel-\u0107wiczenia-zosta\u0142-osi\u0105gni\u0119ty-je\u015bli",level:2},{value:"\ud83d\udee1\ufe0f Rekomendacja ko\u0144cowa",id:"\ufe0f-rekomendacja-ko\u0144cowa",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"-praktyczne-\u0107wiczenie-testowanie-i-mitigacja--server-side-request-forgery-ssrf-a102025",children:"\ud83e\uddea Praktyczne \u0107wiczenie: Testowanie i mitigacja \u2013 Server-Side Request Forgery (SSRF) (A10:2025)"})}),"\n",(0,s.jsx)(i.h2,{id:"-cel-\u0107wiczenia",children:"\ud83c\udfaf Cel \u0107wiczenia"}),"\n",(0,s.jsx)(i.p,{children:"Celem \u0107wiczenia jest zidentyfikowanie i wykorzystanie podatno\u015bci typu SSRF w aplikacji webowej, a nast\u0119pnie wdro\u017cenie skutecznych mechanizm\xf3w mitigacji w kodzie i konfiguracji serwera."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-scenariusz-testowy",children:"\ud83d\udee0\ufe0f Scenariusz testowy"}),"\n",(0,s.jsx)(i.h3,{id:"aplikacja",children:"Aplikacja:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Backend Node.js z funkcj\u0105 ",(0,s.jsx)(i.code,{children:"/fetch?url=..."})," pozwalaj\u0105c\u0105 u\u017cytkownikowi na pobranie zawarto\u015bci z zewn\u0119trznego URL."]}),"\n",(0,s.jsx)(i.li,{children:"Brak walidacji adresu URL."}),"\n",(0,s.jsx)(i.li,{children:"Aplikacja dzia\u0142a w chmurze (np. AWS EC2)."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-krok-po-kroku-testowanie-ssrf",children:"\ud83d\udd0d Krok po kroku: testowanie SSRF"}),"\n",(0,s.jsx)(i.h3,{id:"1-wst\u0119pna-analiza",children:"1. Wst\u0119pna analiza"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Przetestuj endpoint ",(0,s.jsx)(i.code,{children:"/fetch?url="})," z adresami:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"http://localhost:80/"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"http://169.254.169.254/latest/meta-data/"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"http://127.0.0.1/admin"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"\u27a1\ufe0f Zwr\xf3\u0107 uwag\u0119 na odpowiedzi \u2013 czy aplikacja zwraca zawarto\u015b\u0107?"}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"2-weryfikacja-ssrf-przez-narz\u0119dzia",children:"2. Weryfikacja SSRF przez narz\u0119dzia"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Skorzystaj z narz\u0119dzi:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"Burp Suite"})," lub ",(0,s.jsx)(i.code,{children:"OWASP ZAP"})," \u2013 do przechwycenia i zmodyfikowania \u017c\u0105dania."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"Interactsh"})," \u2013 do rejestrowania \u017c\u0105da\u0144 wychodz\u0105cych."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"SSRFmap"})," \u2013 do automatycznego skanowania i eksploitacji."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"3-eskalacja--atak-na-metadata-service",children:"3. Eskalacja \u2013 atak na metadata service"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["W \u015brodowiskach chmurowych (np. AWS) sprawd\u017a:","\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"http://169.254.169.254/latest/meta-data/iam/security-credentials/\n"})}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"Je\u015bli odpowied\u017a zawiera dane uwierzytelniaj\u0105ce \u2013 podatno\u015b\u0107 jest krytyczna."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-mitigacja",children:"\u2705 Mitigacja"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Walidacja i filtrowanie danych wej\u015bciowych"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Dopuszczaj tylko znane, bezpieczne domeny (whitelist)."}),"\n",(0,s.jsx)(i.li,{children:"Odrzucaj adresy IP z zakres\xf3w lokalnych, prywatnych, rezerwowych."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Bezpieczna konfiguracja \u015brodowiska"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Zablokuj dost\u0119p aplikacji do adres\xf3w ",(0,s.jsx)(i.code,{children:"127.0.0.1"}),", ",(0,s.jsx)(i.code,{children:"169.254.169.254"})," na poziomie firewalla."]}),"\n",(0,s.jsx)(i.li,{children:"Ogranicz uprawnienia IAM instancji w chmurze."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Monitorowanie i alertowanie"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Monitoruj outbound traffic aplikacji."}),"\n",(0,s.jsx)(i.li,{children:"Wykrywaj nietypowe \u017c\u0105dania wychodz\u0105ce do wewn\u0119trznych adres\xf3w."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-wnioski",children:"\ud83d\udd10 Wnioski"}),"\n",(0,s.jsx)(i.p,{children:"Po wykonaniu \u0107wiczenia uczestnik b\u0119dzie potrafi\u0142:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"zidentyfikowa\u0107 potencjalne punkty podatne na SSRF,"}),"\n",(0,s.jsx)(i.li,{children:"wykorzysta\u0107 podatno\u015b\u0107 do uzyskania danych z wewn\u0119trznych zasob\xf3w,"}),"\n",(0,s.jsx)(i.li,{children:"wdro\u017cy\u0107 skuteczne zabezpieczenia na poziomie kodu i infrastruktury."}),"\n"]}),"\n",(0,s.jsx)(i.h1,{id:"-dodatkowe-\u0107wiczenie-wykrywanie-ssrf-w-\u015brodowisku-testowym",children:"\ud83e\uddea Dodatkowe \u0107wiczenie: Wykrywanie SSRF w \u015brodowisku testowym"}),"\n",(0,s.jsx)(i.h2,{id:"-cel",children:"\ud83c\udfaf Cel"}),"\n",(0,s.jsx)(i.p,{children:"Zidentyfikowa\u0107 i potwierdzi\u0107 istnienie podatno\u015bci SSRF w \u015brodowisku testowym z wykorzystaniem dedykowanego narz\u0119dzia (np. SSRFmap) oraz us\u0142ugi rejestruj\u0105cej \u017c\u0105dania (np. Interactsh)."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-scenariusz",children:"\ud83e\uddea Scenariusz"}),"\n",(0,s.jsx)(i.h3,{id:"\u015brodowisko-testowe",children:"\u015arodowisko testowe:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Aplikacja PHP udost\u0119pnia funkcj\u0119 ",(0,s.jsx)(i.code,{children:"/proxy.php?url="}),"."]}),"\n",(0,s.jsx)(i.li,{children:"Mo\u017cliwo\u015b\u0107 podania dowolnego zewn\u0119trznego adresu URL przez u\u017cytkownika."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-krok-po-kroku",children:"\ud83d\udd0d Krok po kroku"}),"\n",(0,s.jsx)(i.h3,{id:"1-uruchom-serwer-rejestruj\u0105cy-interactsh",children:"1. Uruchom serwer rejestruj\u0105cy (Interactsh)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Wejd\u017a na ",(0,s.jsx)(i.a,{href:"https://github.com/projectdiscovery/interactsh",children:"https://github.com/projectdiscovery/interactsh"})," lub skorzystaj z darmowego endpointu Interactsh."]}),"\n",(0,s.jsxs)(i.li,{children:["Wygeneruj unikalny identyfikator subdomeny, np. ",(0,s.jsx)(i.code,{children:"abcd1234.oast.site"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"2-podstawowy-test-ssrf",children:"2. Podstawowy test SSRF"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Wprowad\u017a do aplikacji warto\u015b\u0107:","\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"/proxy.php?url=http://abcd1234.oast.site/\n"})}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"Obserwuj, czy serwer Interactsh zarejestruje po\u0142\u0105czenie \u2013 je\u015bli tak, aplikacja jest podatna."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"3-test-ssrf-z-nietypowymi-protoko\u0142ami",children:"3. Test SSRF z nietypowymi protoko\u0142ami"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Przetestuj protoko\u0142y alternatywne:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"ftp://abcd1234.oast.site/"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"gopher://abcd1234.oast.site/"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"file:///etc/passwd"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"\u27a1\ufe0f Zwr\xf3\u0107 uwag\u0119, czy aplikacja pr\xf3buje wykona\u0107 \u017c\u0105danie lub zwraca b\u0142\u0105d serwera (np. 500)."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"4-test-za-pomoc\u0105-narz\u0119dzia-ssrfmap",children:"4. Test za pomoc\u0105 narz\u0119dzia SSRFmap"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Uruchom narz\u0119dzie:","\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'python3 ssrfmap.py -u "http://localhost/proxy.php?url=INJECT_HERE" -l payloads.txt\n'})}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"Obserwuj, kt\xf3re payloady generuj\u0105 odpowiedzi, timeouty lub b\u0142\u0119dy."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-cel-\u0107wiczenia-zosta\u0142-osi\u0105gni\u0119ty-je\u015bli",children:"\u2705 Cel \u0107wiczenia zosta\u0142 osi\u0105gni\u0119ty, je\u015bli:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Aplikacja wykonuje \u017c\u0105dania HTTP do Interactsh lub innego kontrolowanego hosta."}),"\n",(0,s.jsx)(i.li,{children:"Uczestnik potrafi zidentyfikowa\u0107 punkt podatny, przetestowa\u0107 r\xf3\u017cne warianty SSRF i wyci\u0105gn\u0105\u0107 wnioski na podstawie odpowiedzi aplikacji."}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-rekomendacja-ko\u0144cowa",children:"\ud83d\udee1\ufe0f Rekomendacja ko\u0144cowa"}),"\n",(0,s.jsx)(i.p,{children:"Po potwierdzeniu podatno\u015bci nale\u017cy:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Zablokowa\u0107 dost\u0119p do prywatnych IP i wewn\u0119trznych domen."}),"\n",(0,s.jsx)(i.li,{children:"Walidowa\u0107 dane wej\u015bciowe."}),"\n",(0,s.jsx)(i.li,{children:"Stosowa\u0107 whitelist\u0119 host\xf3w lub po\u015brednicz\u0105cy bezpieczny proxy."}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>t});var a=n(96540);const s={},r=a.createContext(s);function o(e){const i=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(r.Provider,{value:i},e.children)}}}]);