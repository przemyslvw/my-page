<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BikeConnect Pro - Multi-User Motorcycle App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .pulse-green { animation: pulse-green 2s infinite; }
        @keyframes pulse-green { 0%, 100% { background-color: #10b981; } 50% { background-color: #059669; } }
        .notification { animation: slideDown 0.3s ease-out; }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        .role-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .role-card { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <i class="fas fa-motorcycle text-4xl text-blue-600 mb-4"></i>
                <h1 class="text-3xl font-bold text-gray-800">BikeConnect Pro</h1>
                <p class="text-gray-600 mt-2">Twoja aplikacja motocyklowa</p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="twoj@email.com" value="demo@bikeconnect.pl">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Hasło</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="••••••••" value="demo123">
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                    <i class="fas fa-sign-in-alt mr-2"></i>Zaloguj się
                </button>
            </form>
            
            <div class="mt-6 pt-6 border-t border-gray-200">
                <p class="text-center text-sm text-gray-600 mb-4">Nie masz konta? Wybierz typ:</p>
                <div class="space-y-2">
                    <button onclick="selectUserType('user')" class="w-full bg-green-100 text-green-700 py-2 px-4 rounded-lg hover:bg-green-200 transition duration-200">
                        <i class="fas fa-user mr-2"></i>Motocyklista
                    </button>
                    <button onclick="selectUserType('workshop')" class="w-full bg-orange-100 text-orange-700 py-2 px-4 rounded-lg hover:bg-orange-200 transition duration-200">
                        <i class="fas fa-tools mr-2"></i>Warsztat
                    </button>
                    <button onclick="selectUserType('mechanic')" class="w-full bg-red-100 text-red-700 py-2 px-4 rounded-lg hover:bg-red-200 transition duration-200">
                        <i class="fas fa-wrench mr-2"></i>Mechanik Mobilny
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Type Selection Screen -->
    <div id="userTypeScreen" class="min-h-screen bg-gradient-to-br from-green-600 to-blue-700 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-4xl">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">Wybierz typ konta</h2>
                <p class="text-gray-600 mt-2">Każdy typ ma dedykowane funkcjonalności</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="role-card bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white cursor-pointer" onclick="loginAsUser('user')">
                    <div class="text-center">
                        <i class="fas fa-motorcycle text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">Motocyklista</h3>
                        <p class="text-green-100 text-sm mb-4">Śledź lokalizację, znajdź warsztaty, wezwij mechanika</p>
                        <ul class="text-green-100 text-sm space-y-1">
                            <li><i class="fas fa-map-marker-alt mr-2"></i>GPS Tracking</li>
                            <li><i class="fas fa-search mr-2"></i>Szukaj warsztatów</li>
                            <li><i class="fas fa-phone mr-2"></i>Wezwij mechanika</li>
                        </ul>
                    </div>
                </div>
                
                <div class="role-card bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white cursor-pointer" onclick="loginAsUser('workshop')">
                    <div class="text-center">
                        <i class="fas fa-store text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">Warsztat</h3>
                        <p class="text-orange-100 text-sm mb-4">Zarządzaj rezerwacjami, kalendarzem i opiniami</p>
                        <ul class="text-orange-100 text-sm space-y-1">
                            <li><i class="fas fa-calendar mr-2"></i>Kalendarz</li>
                            <li><i class="fas fa-star mr-2"></i>Opinie klientów</li>
                            <li><i class="fas fa-chart-bar mr-2"></i>Statystyki</li>
                        </ul>
                    </div>
                </div>
                
                <div class="role-card bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white cursor-pointer" onclick="loginAsUser('mechanic')">
                    <div class="text-center">
                        <i class="fas fa-toolbox text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">Mechanik Mobilny</h3>
                        <p class="text-red-100 text-sm mb-4">Odbieraj zlecenia, nawiguj, zarządzaj zarobkami</p>
                        <ul class="text-red-100 text-sm space-y-1">
                            <li><i class="fas fa-tasks mr-2"></i>Zlecenia</li>
                            <li><i class="fas fa-route mr-2"></i>Nawigacja</li>
                            <li><i class="fas fa-money-bill mr-2"></i>Zarobki</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="showLoginScreen()" class="text-gray-600 hover:text-gray-800">
                    <i class="fas fa-arrow-left mr-2"></i>Powrót do logowania
                </button>
            </div>
        </div>
    </div>

    <!-- Motorcyclist Dashboard -->
    <div id="userDashboard" class="hidden">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-4 shadow-lg">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-motorcycle text-2xl mr-3"></i>
                    <h1 class="text-xl font-bold">BikeConnect</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="sosButton" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg font-bold">
                        <i class="fas fa-exclamation-triangle mr-2"></i>SOS
                    </button>
                    <div class="flex items-center">
                        <i class="fas fa-user-circle text-2xl mr-2"></i>
                        <span>Jan Kowalski</span>
                    </div>
                    <button onclick="logout()" class="hover:bg-blue-700 p-2 rounded">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-md">
            <div class="flex">
                <button onclick="showUserTab('map')" class="user-tab flex-1 py-3 px-4 text-center hover:bg-blue-50 border-b-2 border-blue-500">
                    <i class="fas fa-map mr-2"></i>Mapa
                </button>
                <button onclick="showUserTab('workshops')" class="user-tab flex-1 py-3 px-4 text-center hover:bg-blue-50">
                    <i class="fas fa-store mr-2"></i>Warsztaty
                </button>
                <button onclick="showUserTab('mechanics')" class="user-tab flex-1 py-3 px-4 text-center hover:bg-blue-50">
                    <i class="fas fa-wrench mr-2"></i>Mechanicy
                </button>
                <button onclick="showUserTab('profile')" class="user-tab flex-1 py-3 px-4 text-center hover:bg-blue-50">
                    <i class="fas fa-user mr-2"></i>Profil
                </button>
            </div>
        </nav>

        <!-- Map Tab -->
        <div id="userMapTab" class="user-content p-4">
            <div class="grid md:grid-cols-4 gap-4 mb-4">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-tachometer-alt text-blue-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Prędkość</p>
                            <p class="text-xl font-bold">65 km/h</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-road text-green-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Dystans</p>
                            <p class="text-xl font-bold">23.5 km</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-clock text-orange-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Czas</p>
                            <p class="text-xl font-bold">1h 15m</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-users text-purple-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Znajomi</p>
                            <p class="text-xl font-bold">3 online</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow">
                <div class="p-4 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Mapa GPS</h3>
                        <div class="flex space-x-2">
                            <button id="shareLocationBtn" class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">
                                <i class="fas fa-share-alt mr-1"></i>Udostępnij
                            </button>
                            <button class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">
                                <i class="fas fa-route mr-1"></i>Trasa
                            </button>
                        </div>
                    </div>
                </div>
                <div id="userMap" style="height: 400px;"></div>
            </div>
        </div>

        <!-- Workshops Tab -->
        <div id="userWorkshopsTab" class="user-content p-4 hidden">
            <div class="mb-4">
                <div class="flex flex-wrap gap-4">
                    <input type="text" placeholder="Szukaj warsztatów..." class="flex-1 px-4 py-2 border rounded-lg">
                    <select class="px-4 py-2 border rounded-lg">
                        <option>Wszystkie usługi</option>
                        <option>Serwis podstawowy</option>
                        <option>Części zamienne</option>
                        <option>Tuning</option>
                    </select>
                    <select class="px-4 py-2 border rounded-lg">
                        <option>Odległość</option>
                        <option>Do 5 km</option>
                        <option>Do 10 km</option>
                        <option>Do 25 km</option>
                    </select>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDQwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgNzVIMjI1VjEyNUgxNzVWNzVaIiBmaWxsPSIjOTk5OTk5Ii8+CjwvZz4KPC9zdmc+" alt="Warsztat" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold text-lg">Moto Serwis Pro</h4>
                            <div class="flex items-center">
                                <i class="fas fa-star text-yellow-400"></i>
                                <span class="ml-1 text-sm">4.8</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mb-2">Krakowska 123, Warszawa</p>
                        <p class="text-gray-700 text-sm mb-3">Specjalizacja: Honda, Yamaha, serwis podstawowy</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-semibold">2.3 km</span>
                            <button onclick="bookWorkshop('Moto Serwis Pro')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                                Zarezerwuj
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDQwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgNzVIMjI1VjEyNUgxNzVWNzVaIiBmaWxsPSIjOTk5OTk5Ii8+CjwvZz4KPC9zdmc+" alt="Warsztat" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold text-lg">Bike Expert</h4>
                            <div class="flex items-center">
                                <i class="fas fa-star text-yellow-400"></i>
                                <span class="ml-1 text-sm">4.6</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mb-2">Marszałkowska 45, Warszawa</p>
                        <p class="text-gray-700 text-sm mb-3">Specjalizacja: Wszystkie marki, tuning, części</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-semibold">4.7 km</span>
                            <button onclick="bookWorkshop('Bike Expert')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                                Zarezerwuj
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mechanics Tab -->
        <div id="userMechanicsTab" class="user-content p-4 hidden">
            <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                <h3 class="text-lg font-semibold text-red-800 mb-2">Potrzebujesz pomocy na trasie?</h3>
                <p class="text-red-700 mb-4">Wezwij mobilnego mechanika w swoją lokalizację</p>
                <button onclick="callMechanic()" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 font-semibold">
                    <i class="fas fa-phone mr-2"></i>Wezwij Mechanika
                </button>
            </div>
            
            <h4 class="text-lg font-semibold mb-4">Dostępni mechanicy w pobliżu</h4>
            <div class="space-y-4">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzIiIGN5PSIzMiIgcj0iMzIiIGZpbGw9IiNGM0Y0RjYiLz4KPGV4dCB4PSIyNCIgeT0iNDAiIGZpbGw9IiM5OTk5OTkiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiPk08L3RleHQ+Cjwvc3ZnPgo=" alt="Mechanik" class="w-12 h-12 rounded-full mr-4">
                            <div>
                                <h5 class="font-semibold">Marek Nowak</h5>
                                <p class="text-sm text-gray-600">Specjalista Honda/Yamaha</p>
                                <div class="flex items-center mt-1">
                                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                                    <span class="text-sm ml-1">4.9 (127 opinii)</span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-green-600 font-semibold">1.2 km</p>
                            <p class="text-sm text-gray-600">~15 min</p>
                            <div class="flex items-center mt-1">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                <span class="text-sm text-green-600">Dostępny</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzIiIGN5PSIzMiIgcj0iMzIiIGZpbGw9IiNGM0Y0RjYiLz4KPGV4dCB4PSIyNCIgeT0iNDAiIGZpbGw9IiM5OTk5OTkiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiPlA8L3RleHQ+Cjwvc3ZnPgo=" alt="Mechanik" class="w-12 h-12 rounded-full mr-4">
                            <div>
                                <h5 class="font-semibold">Piotr Kowalczyk</h5>
                                <p class="text-sm text-gray-600">Uniwersalny mechanik</p>
                                <div class="flex items-center mt-1">
                                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                                    <span class="text-sm ml-1">4.7 (89 opinii)</span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-green-600 font-semibold">2.8 km</p>
                            <p class="text-sm text-gray-600">~25 min</p>
                            <div class="flex items-center mt-1">
                                <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
                                <span class="text-sm text-orange-600">Zajęty</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="userProfileTab" class="user-content p-4 hidden">
            <div class="max-w-2xl mx-auto">
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-6">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iNDAiIGZpbGw9IiNGM0Y0RjYiLz4KPGV4dCB4PSIzMCIgeT0iNTAiIGZpbGw9IiM5OTk5OTkiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIzMCIgZm9udC13ZWlnaHQ9ImJvbGQiPko8L3RleHQ+Cjwvc3ZnPgo=" alt="Profil" class="w-20 h-20 rounded-full mr-6">
                        <div>
                            <h3 class="text-2xl font-bold">Jan Kowalski</h3>
                            <p class="text-gray-600">jan.kowalski@email.com</p>
                            <p class="text-gray-600">+48 123 456 789</p>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold mb-3">Mój motocykl</h4>
                            <div class="space-y-2 text-sm">
                                <p><span class="font-medium">Marka:</span> Honda</p>
                                <p><span class="font-medium">Model:</span> CBR 600RR</p>
                                <p><span class="font-medium">Rok:</span> 2020</p>
                                <p><span class="font-medium">Pojemność:</span> 600cc</p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-3">Statystyki</h4>
                            <div class="space-y-2 text-sm">
                                <p><span class="font-medium">Przejechane km:</span> 15,432 km</p>
                                <p><span class="font-medium">Czas jazdy:</span> 287 godzin</p>
                                <p><span class="font-medium">Średnia prędkość:</span> 54 km/h</p>
                                <p><span class="font-medium">Ostatni serwis:</span> 2 miesiące temu</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h4 class="font-semibold mb-4">Historia tras</h4>
                    <div class="space-y-3">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <p class="font-medium">Wyprawa do Zakopanego</p>
                            <p class="text-sm text-gray-600">15.12.2024 • 247 km • 4h 23m</p>
                        </div>
                        <div class="border-l-4 border-green-500 pl-4">
                            <p class="font-medium">Objazd Mazur</p>
                            <p class="text-sm text-gray-600">08.12.2024 • 156 km • 3h 12m</p>
                        </div>
                        <div class="border-l-4 border-orange-500 pl-4">
                            <p class="font-medium">Trasa na Śląsk</p>
                            <p class="text-sm text-gray-600">01.12.2024 • 89 km • 1h 45m</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Workshop Dashboard -->
    <div id="workshopDashboard" class="hidden">
        <!-- Header -->
        <header class="bg-orange-600 text-white p-4 shadow-lg">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-store text-2xl mr-3"></i>
                    <h1 class="text-xl font-bold">Panel Warsztatu</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <i class="fas fa-store-alt text-2xl mr-2"></i>
                        <span>Moto Serwis Pro</span>
                    </div>
                    <button onclick="logout()" class="hover:bg-orange-700 p-2 rounded">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-md">
            <div class="flex">
                <button onclick="showWorkshopTab('dashboard')" class="workshop-tab flex-1 py-3 px-4 text-center hover:bg-orange-50 border-b-2 border-orange-500">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </button>
                <button onclick="showWorkshopTab('bookings')" class="workshop-tab flex-1 py-3 px-4 text-center hover:bg-orange-50">
                    <i class="fas fa-calendar mr-2"></i>Rezerwacje
                </button>
                <button onclick="showWorkshopTab('reviews')" class="workshop-tab flex-1 py-3 px-4 text-center hover:bg-orange-50">
                    <i class="fas fa-star mr-2"></i>Opinie
                </button>
                <button onclick="showWorkshopTab('profile')" class="workshop-tab flex-1 py-3 px-4 text-center hover:bg-orange-50">
                    <i class="fas fa-cog mr-2"></i>Ustawienia
                </button>
            </div>
        </nav>

        <!-- Dashboard Tab -->
        <div id="workshopDashboardTab" class="workshop-content p-4">
            <div class="grid md:grid-cols-4 gap-4 mb-6">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-calendar-check text-green-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Dzisiaj</p>
                            <p class="text-2xl font-bold">7</p>
                            <p class="text-xs text-gray-500">rezerwacji</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-star text-yellow-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Ocena</p>
                            <p class="text-2xl font-bold">4.8</p>
                            <p class="text-xs text-gray-500">z 156 opinii</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-money-bill text-blue-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Ten miesiąc</p>
                            <p class="text-2xl font-bold">24.5k</p>
                            <p class="text-xs text-gray-500">PLN</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-users text-purple-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Klienci</p>
                            <p class="text-2xl font-bold">89</p>
                            <p class="text-xs text-gray-500">w tym miesiącu</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Dzisiejsze rezerwacje</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div>
                                    <p class="font-medium">Jan Kowalski - CBR 600</p>
                                    <p class="text-sm text-gray-600">09:00 - Serwis podstawowy</p>
                                </div>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">Zakończone</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                <div>
                                    <p class="font-medium">Anna Nowak - Ninja 300</p>
                                    <p class="text-sm text-gray-600">11:30 - Wymiana oleju</p>
                                </div>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">W trakcie</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium">Piotr Wiśniewski - Hornet 600</p>
                                    <p class="text-sm text-gray-600">14:00 - Naprawa hamulców</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm">Oczekuje</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="bg-white rounded-lg shadow p-6 mb-4">
                        <h3 class="text-lg font-semibold mb-4">Statystyki miesięczne</h3>
                        <canvas id="workshopChart" style="height: 200px;"></canvas>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Ostatnie opinie</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="flex items-center mb-1">
                                    <span class="font-medium text-sm">Marek K.</span>
                                    <div class="flex ml-2">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-600">"Świetny serwis, szybko i profesjonalnie"</p>
                            </div>
                            <div>
                                <div class="flex items-center mb-1">
                                    <span class="font-medium text-sm">Agata M.</span>
                                    <div class="flex ml-2">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="far fa-star text-gray-300 text-xs"></i>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-600">"Dobre ceny, miła obsługa"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bookings Tab -->
        <div id="workshopBookingsTab" class="workshop-content p-4 hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Kalendarz rezerwacji</h2>
                <button class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600">
                    <i class="fas fa-plus mr-2"></i>Dodaj rezerwację
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow">
                <div class="p-4 border-b">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold">Grudzień 2024</h3>
                        <div class="flex space-x-2">
                            <button class="p-2 hover:bg-gray-100 rounded">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="p-2 hover:bg-gray-100 rounded">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-4">
                    <div class="grid grid-cols-7 gap-1 mb-4">
                        <div class="p-2 text-center font-semibold text-gray-600">Pon</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Wt</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Śr</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Czw</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Pt</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Sob</div>
                        <div class="p-2 text-center font-semibold text-gray-600">Nie</div>
                        
                        <!-- Calendar days -->
                        <div class="p-2 text-center text-gray-400">25</div>
                        <div class="p-2 text-center text-gray-400">26</div>
                        <div class="p-2 text-center text-gray-400">27</div>
                        <div class="p-2 text-center text-gray-400">28</div>
                        <div class="p-2 text-center text-gray-400">29</div>
                        <div class="p-2 text-center text-gray-400">30</div>
                        <div class="p-2 text-center">1</div>
                        
                        <div class="p-2 text-center">2</div>
                        <div class="p-2 text-center">3</div>
                        <div class="p-2 text-center">4</div>
                        <div class="p-2 text-center">5</div>
                        <div class="p-2 text-center">6</div>
                        <div class="p-2 text-center">7</div>
                        <div class="p-2 text-center">8</div>
                        
                        <div class="p-2 text-center">9</div>
                        <div class="p-2 text-center">10</div>
                        <div class="p-2 text-center">11</div>
                        <div class="p-2 text-center bg-orange-100 rounded relative">
                            12
                            <div class="absolute bottom-0 left-1 right-1 h-1 bg-orange-500 rounded"></div>
                        </div>
                        <div class="p-2 text-center">13</div>
                        <div class="p-2 text-center">14</div>
                        <div class="p-2 text-center">15</div>
                        
                        <div class="p-2 text-center bg-blue-100 rounded font-semibold">16</div>
                        <div class="p-2 text-center">17</div>
                        <div class="p-2 text-center">18</div>
                        <div class="p-2 text-center">19</div>
                        <div class="p-2 text-center">20</div>
                        <div class="p-2 text-center">21</div>
                        <div class="p-2 text-center">22</div>
                    </div>
                    
                    <div class="mt-6">
                        <h4 class="font-semibold mb-3">Rezerwacje na dziś (16 grudnia)</h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-3 border rounded-lg">
                                <div>
                                    <p class="font-medium">09:00 - Jan Kowalski</p>
                                    <p class="text-sm text-gray-600">CBR 600 • Serwis podstawowy</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="text-green-600 hover:text-green-800">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="text-blue-600 hover:text-blue-800">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 border rounded-lg">
                                <div>
                                    <p class="font-medium">11:30 - Anna Nowak</p>
                                    <p class="text-sm text-gray-600">Ninja 300 • Wymiana oleju</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="text-green-600 hover:text-green-800">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="text-blue-600 hover:text-blue-800">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reviews Tab -->
        <div id="workshopReviewsTab" class="workshop-content p-4 hidden">
            <div class="grid lg:grid-cols-3 gap-6">
                <div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Podsumowanie opinii</h3>
                        <div class="text-center mb-4">
                            <div class="text-4xl font-bold text-orange-600">4.8</div>
                            <div class="flex justify-center mb-2">
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                                <i class="fas fa-star text-yellow-400"></i>
                            </div>
                            <p class="text-sm text-gray-600">156 opinii</p>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="text-sm w-8">5★</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-2 mx-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 78%"></div>
                                </div>
                                <span class="text-sm text-gray-600">122</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-sm w-8">4★</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-2 mx-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 15%"></div>
                                </div>
                                <span class="text-sm text-gray-600">23</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-sm w-8">3★</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-2 mx-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 4%"></div>
                                </div>
                                <span class="text-sm text-gray-600">7</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-sm w-8">2★</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-2 mx-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 2%"></div>
                                </div>
                                <span class="text-sm text-gray-600">3</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-sm w-8">1★</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-2 mx-2">
                                    <div class="bg-yellow-400 h-2 rounded-full" style="width: 1%"></div>
                                </div>
                                <span class="text-sm text-gray-600">1</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Najnowsze opinie</h3>
                        <div class="space-y-4">
                            <div class="border-b pb-4">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-gray-300 rounded-full mr-3 flex items-center justify-center">
                                        <span class="font-semibold text-gray-600">MK</span>
                                    </div>
                                    <div>
                                        <p class="font-medium">Marek Kowalski</p>
                                        <div class="flex items-center">
                                            <div class="flex mr-2">
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                            </div>
                                            <span class="text-sm text-gray-600">12.12.2024</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-gray-700 text-sm">"Świetny serwis! Szybko zdiagnozowali problem z hamulcami i naprawili wszystko w czasie rekordowym. Ceny uczciwe, obsługa profesjonalna. Polecam każdemu motocykliście!"</p>
                                <div class="mt-2 flex space-x-4">
                                    <button class="text-blue-600 text-sm hover:underline">Odpowiedz</button>
                                    <button class="text-gray-500 text-sm hover:underline">Zgłoś</button>
                                </div>
                            </div>
                            
                            <div class="border-b pb-4">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-gray-300 rounded-full mr-3 flex items-center justify-center">
                                        <span class="font-semibold text-gray-600">AM</span>
                                    </div>
                                    <div>
                                        <p class="font-medium">Agata Michalska</p>
                                        <div class="flex items-center">
                                            <div class="flex mr-2">
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="far fa-star text-gray-300 text-sm"></i>
                                            </div>
                                            <span class="text-sm text-gray-600">10.12.2024</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-gray-700 text-sm">"Dobre ceny i miła obsługa. Jedyny minus to trochę dłuższy czas oczekiwania, ale jakość usług rekompensuje. Na pewno wrócę z kolejnymi naprawami."</p>
                                <div class="mt-2">
                                    <div class="bg-blue-50 p-3 rounded mt-2">
                                        <p class="text-sm text-blue-800"><strong>Odpowiedź warsztatu:</strong> Dziękujemy za opinię! Pracujemy nad skróceniem czasów oczekiwania. 😊</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="border-b pb-4">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-gray-300 rounded-full mr-3 flex items-center justify-center">
                                        <span class="font-semibold text-gray-600">PW</span>
                                    </div>
                                    <div>
                                        <p class="font-medium">Piotr Wiśniewski</p>
                                        <div class="flex items-center">
                                            <div class="flex mr-2">
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                                <i class="fas fa-star text-yellow-400 text-sm"></i>
                                            </div>
                                            <span class="text-sm text-gray-600">08.12.2024</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-gray-700 text-sm">"Profesjonalny serwis z wieloletnim doświadczeniem. Świetnie znają się na motocyklach sportowych. Polecam szczególnie na większe naprawy."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="workshopProfileTab" class="workshop-content p-4 hidden">
            <div class="max-w-4xl mx-auto">
                <div class="grid lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Dane warsztatu</h3>
                        <form class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nazwa warsztatu</label>
                                <input type="text" value="Moto Serwis Pro" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Adres</label>
                                <input type="text" value="ul. Krakowska 123, 00-001 Warszawa" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Telefon</label>
                                <input type="tel" value="+48 22 123 45 67" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" value="kontakt@motoserwispro.pl" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Strona www</label>
                                <input type="url" value="www.motoserwispro.pl" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                        </form>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Godziny otwarcia</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Poniedziałek</span>
                                <span class="text-sm">8:00 - 17:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Wtorek</span>
                                <span class="text-sm">8:00 - 17:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Środa</span>
                                <span class="text-sm">8:00 - 17:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Czwartek</span>
                                <span class="text-sm">8:00 - 17:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Piątek</span>
                                <span class="text-sm">8:00 - 17:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Sobota</span>
                                <span class="text-sm">9:00 - 14:00</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium">Niedziela</span>
                                <span class="text-sm text-red-600">Zamknięte</span>
                            </div>
                        </div>
                        
                        <h3 class="text-lg font-semibold mb-4 mt-6">Usługi</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Serwis podstawowy</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Wymiana oleju</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Naprawy hamulców</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Tuning</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Części zamienne</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Diagnostyka</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Ustawienia konta</h3>
                        <button class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600">
                            Zapisz zmiany
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mechanic Dashboard -->
    <div id="mechanicDashboard" class="hidden">
        <!-- Header -->
        <header class="bg-red-600 text-white p-4 shadow-lg">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-toolbox text-2xl mr-3"></i>
                    <h1 class="text-xl font-bold">Panel Mechanika</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div id="availabilityToggle" class="relative">
                            <input type="checkbox" id="availability" class="sr-only" checked>
                            <label for="availability" class="flex items-center cursor-pointer">
                                <div class="relative">
                                    <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                                    <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition transform translate-x-6"></div>
                                </div>
                                <span class="ml-3">Dostępny</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-user-circle text-2xl mr-2"></i>
                        <span>Marek Nowak</span>
                    </div>
                    <button onclick="logout()" class="hover:bg-red-700 p-2 rounded">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-md">
            <div class="flex">
                <button onclick="showMechanicTab('dashboard')" class="mechanic-tab flex-1 py-3 px-4 text-center hover:bg-red-50 border-b-2 border-red-500">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </button>
                <button onclick="showMechanicTab('requests')" class="mechanic-tab flex-1 py-3 px-4 text-center hover:bg-red-50">
                    <i class="fas fa-tasks mr-2"></i>Zlecenia
                </button>
                <button onclick="showMechanicTab('earnings')" class="mechanic-tab flex-1 py-3 px-4 text-center hover:bg-red-50">
                    <i class="fas fa-money-bill mr-2"></i>Zarobki
                </button>
                <button onclick="showMechanicTab('profile')" class="mechanic-tab flex-1 py-3 px-4 text-center hover:bg-red-50">
                    <i class="fas fa-user mr-2"></i>Profil
                </button>
            </div>
        </nav>

        <!-- Dashboard Tab -->
        <div id="mechanicDashboardTab" class="mechanic-content p-4">
            <div class="grid md:grid-cols-4 gap-4 mb-6">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-tasks text-blue-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Dzisiaj</p>
                            <p class="text-2xl font-bold">3</p>
                            <p class="text-xs text-gray-500">zlecenia</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-star text-yellow-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Ocena</p>
                            <p class="text-2xl font-bold">4.9</p>
                            <p class="text-xs text-gray-500">z 127 opinii</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-money-bill text-green-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Dziś</p>
                            <p class="text-2xl font-bold">850</p>
                            <p class="text-xs text-gray-500">PLN</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center">
                        <i class="fas fa-route text-purple-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-sm text-gray-600">Przejechane</p>
                            <p class="text-2xl font-bold">45</p>
                            <p class="text-xs text-gray-500">km</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-4 border-b">
                            <h3 class="text-lg font-semibold">Aktualne zlecenia na mapie</h3>
                        </div>
                        <div id="mechanicMap" style="height: 400px;"></div>
                    </div>
                </div>
                
                <div>
                    <div class="bg-white rounded-lg shadow p-6 mb-4">
                        <h3 class="text-lg font-semibold mb-4">Oczekujące zlecenia</h3>
                        <div class="space-y-3">
                            <div class="p-3 border rounded-lg">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-medium">Jan K.</p>
                                        <p class="text-sm text-gray-600">CBR 600 - Problem z rozruchem</p>
                                    </div>
                                    <span class="text-sm text-green-600">1.2 km</span>
                                </div>
                                <p class="text-xs text-gray-500 mb-2">15 min temu</p>
                                <div class="flex space-x-2">
                                    <button onclick="acceptJob()" class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">
                                        Przyjmij
                                    </button>
                                    <button class="bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400">
                                        Odrzuć
                                    </button>
                                </div>
                            </div>
                            
                            <div class="p-3 border rounded-lg">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <p class="font-medium">Anna M.</p>
                                        <p class="text-sm text-gray-600">Ninja 300 - Przebitka</p>
                                    </div>
                                    <span class="text-sm text-green-600">2.8 km</span>
                                </div>
                                <p class="text-xs text-gray-500 mb-2">32 min temu</p>
                                <div class="flex space-x-2">
                                    <button class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">
                                        Przyjmij
                                    </button>
                                    <button class="bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400">
                                        Odrzuć
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Dzisiejsze zarobki</h3>
                        <canvas id="mechanicEarningsChart" style="height: 150px;"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Requests Tab -->
        <div id="mechanicRequestsTab" class="mechanic-content p-4 hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Historia zleceń</h2>
                <div class="flex space-x-2">
                    <select class="px-3 py-2 border rounded-lg">
                        <option>Wszystkie</option>
                        <option>Zakończone</option>
                        <option>W trakcie</option>
                        <option>Anulowane</option>
                    </select>
                    <input type="date" class="px-3 py-2 border rounded-lg">
                </div>
            </div>
            
            <div class="space-y-4">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-check text-green-600"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Zlecenie #1234</h4>
                                <p class="text-sm text-gray-600">Jan Kowalski • CBR 600</p>
                                <p class="text-xs text-gray-500">16.12.2024, 14:30</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">Zakończone</span>
                            <p class="text-lg font-semibold mt-1">320 PLN</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-700">Problem z rozruchem, wymiana świecy zapłonowej</p>
                    <div class="flex items-center mt-2 text-sm text-gray-500">
                        <i class="fas fa-map-marker-alt mr-1"></i>
                        <span>ul. Marszałkowska 45, Warszawa</span>
                        <span class="mx-2">•</span>
                        <i class="fas fa-clock mr-1"></i>
                        <span>1h 15m</span>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-wrench text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Zlecenie #1233</h4>
                                <p class="text-sm text-gray-600">Anna Nowak • Ninja 300</p>
                                <p class="text-xs text-gray-500">16.12.2024, 12:00</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">W trakcie</span>
                            <p class="text-lg font-semibold mt-1">180 PLN</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-700">Przebitka opony tylnej, naprawa na miejscu</p>
                    <div class="flex items-center mt-2 text-sm text-gray-500">
                        <i class="fas fa-map-marker-alt mr-1"></i>
                        <span>ul. Krakowska 123, Warszawa</span>
                        <span class="mx-2">•</span>
                        <i class="fas fa-clock mr-1"></i>
                        <span>45m</span>
                    </div>
                    <div class="mt-3 flex space-x-2">
                        <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                            <i class="fas fa-check mr-2"></i>Zakończ
                        </button>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                            <i class="fas fa-comment mr-2"></i>Chat
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-check text-green-600"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Zlecenie #1232</h4>
                                <p class="text-sm text-gray-600">Piotr Wiśniewski • Hornet 600</p>
                                <p class="text-xs text-gray-500">15.12.2024, 16:45</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">Zakończone</span>
                            <p class="text-lg font-semibold mt-1">450 PLN</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-700">Naprawa hamulców, wymiana klocków</p>
                    <div class="flex items-center mt-2 text-sm text-gray-500">
                        <i class="fas fa-map-marker-alt mr-1"></i>
                        <span>ul. Targowa 67, Warszawa</span>
                        <span class="mx-2">•</span>
                        <i class="fas fa-clock mr-1"></i>
                        <span>2h 30m</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Earnings Tab -->
        <div id="mechanicEarningsTab" class="mechanic-content p-4 hidden">
            <div class="grid lg:grid-cols-3 gap-6 mb-6">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Dzisiaj</h3>
                        <i class="fas fa-calendar-day text-blue-500 text-xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-green-600">850 PLN</p>
                    <p class="text-sm text-gray-600">3 zlecenia</p>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Ten tydzień</h3>
                        <i class="fas fa-calendar-week text-orange-500 text-xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-green-600">3,240 PLN</p>
                    <p class="text-sm text-gray-600">12 zleceń</p>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Ten miesiąc</h3>
                        <i class="fas fa-calendar-alt text-purple-500 text-xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-green-600">12,680 PLN</p>
                    <p class="text-sm text-gray-600">48 zleceń</p>
                </div>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold mb-4">Zarobki w czasie (ostatnie 7 dni)</h3>
                    <canvas id="earningsChart" style="height: 300px;"></canvas>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold mb-4">Podział według typu usług</h3>
                    <canvas id="servicesChart" style="height: 300px;"></canvas>
                </div>
            </div>
            
            <div class="mt-6 bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold mb-4">Szczegółowe rozliczenie</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left py-2">Data</th>
                                <th class="text-left py-2">Zlecenie</th>
                                <th class="text-left py-2">Klient</th>
                                <th class="text-left py-2">Usługa</th>
                                <th class="text-right py-2">Kwota</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="py-2">16.12.2024</td>
                                <td class="py-2">#1234</td>
                                <td class="py-2">Jan K.</td>
                                <td class="py-2">Problem z rozruchem</td>
                                <td class="py-2 text-right">320 PLN</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2">16.12.2024</td>
                                <td class="py-2">#1233</td>
                                <td class="py-2">Anna N.</td>
                                <td class="py-2">Przebitka opony</td>
                                <td class="py-2 text-right">180 PLN</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2">15.12.2024</td>
                                <td class="py-2">#1232</td>
                                <td class="py-2">Piotr W.</td>
                                <td class="py-2">Naprawa hamulców</td>
                                <td class="py-2 text-right">450 PLN</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2">15.12.2024</td>
                                <td class="py-2">#1231</td>
                                <td class="py-2">Marek L.</td>
                                <td class="py-2">Wymiana oleju</td>
                                <td class="py-2 text-right">150 PLN</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="mechanicProfileTab" class="mechanic-content p-4 hidden">
            <div class="max-w-4xl mx-auto">
                <div class="grid lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Dane osobowe</h3>
                        <form class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Imię i nazwisko</label>
                                <input type="text" value="Marek Nowak" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Telefon</label>
                                <input type="tel" value="+48 123 456 789" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" value="marek.nowak@email.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Doświadczenie</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option>5-10 lat</option>
                                    <option>1-5 lat</option>
                                    <option>10+ lat</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Specjalizacje</h3>
                        <div class="grid grid-cols-2 gap-2 mb-4">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Honda</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Yamaha</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Kawasaki</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Suzuki</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">BMW</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Ducati</span>
                            </label>
                        </div>
                        
                        <h4 class="font-semibold mb-2">Rodzaje usług</h4>
                        <div class="grid grid-cols-1 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Podstawowa diagnostyka</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Wymiana oleju</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Naprawa hamulców</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Naprawy elektryczne</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Naprawa przebitek</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 grid lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Ustawienia pracy</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Promień działania</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option>15 km</option>
                                    <option>10 km</option>
                                    <option>25 km</option>
                                    <option>50 km</option>	
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Stawka godzinowa</label>
                                <input type="number" value="80" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Minimalna opłata za dojazd</label>
                                <input type="number" value="50" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-4">Statystyki</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Ukończone zlecenia:</span>
                                <span class="font-semibold">127</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Średnia ocena:</span>
                                <span class="font-semibold">4.9/5.0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Czas odpowiedzi:</span>
                                <span class="font-semibold">12 min</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Proces realizacji:</span>
                                <span class="font-semibold">95%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Ustawienia konta</h3>
                        <button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">
                            Zapisz zmiany
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- SOS Modal -->
    <div id="sosModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="text-center">
                <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-4">Wezwanie SOS</h3>
                <p class="text-gray-600 mb-6">Czy potrzebujesz natychmiastowej pomocy?</p>
                <div class="flex space-x-4">
                    <button onclick="sendSOS()" class="flex-1 bg-red-500 text-white py-3 px-4 rounded-lg hover:bg-red-600">
                        <i class="fas fa-phone mr-2"></i>Wezwij pomoc
                    </button>
                    <button onclick="closeSOSModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-400">
                        Anuluj
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Workshop Booking Modal -->
    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Rezerwacja w warsztacie</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Warsztat</label>
                    <input type="text" id="selectedWorkshop" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Usługa</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <option>Serwis podstawowy</option>
                        <option>Wymiana oleju</option>
                        <option>Naprawa hamulców</option>
                        <option>Diagnostyka</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Data</label>
                    <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Godzina</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <option>09:00</option>
                        <option>10:00</option>
                        <option>11:00</option>
                        <option>14:00</option>
                        <option>15:00</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="button" onclick="submitBooking()" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                        Zarezerwuj
                    </button>
                    <button type="button" onclick="closeBookingModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400">
                        Anuluj
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Mechanic Call Modal -->
    <div id="mechanicModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4">Wezwij mechanika</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Marka motocykla</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <option>Honda</option>
                        <option>Yamaha</option>
                        <option>Kawasaki</option>
                        <option>Suzuki</option>
                        <option>BMW</option>
                        <option>Ducati</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Opis problemu</label>
                    <textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="Opisz problem z motocyklem..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Pilność</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <option>Normalnie</option>
                        <option>Pilne</option>
                        <option>Bardzo pilne</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="button" onclick="submitMechanicCall()" class="flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600">
                        Wezwij
                    </button>
                    <button type="button" onclick="closeMechanicModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400">
                        Anuluj
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications" class="fixed top-4 right-4 z-50"></div>

    <script>
        // Global variables
        let currentUser = null;
        let currentUserType = null;
        let userMap = null;
        let mechanicMap = null;
        let workshopChart = null;
        let mechanicEarningsChart = null;
        let earningsChart = null;
        let servicesChart = null;

        // Authentication
        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('userTypeScreen').classList.add('hidden');
        }

        function selectUserType(type) {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('userTypeScreen').classList.remove('hidden');
        }

        function loginAsUser(userType) {
            currentUserType = userType;
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('userTypeScreen').classList.add('hidden');
            
            // Hide all dashboards
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('workshopDashboard').classList.add('hidden');
            document.getElementById('mechanicDashboard').classList.add('hidden');
            
            // Show appropriate dashboard
            if (userType === 'user') {
                document.getElementById('userDashboard').classList.remove('hidden');
                initUserDashboard();
            } else if (userType === 'workshop') {
                document.getElementById('workshopDashboard').classList.remove('hidden');
                initWorkshopDashboard();
            } else if (userType === 'mechanic') {
                document.getElementById('mechanicDashboard').classList.remove('hidden');
                initMechanicDashboard();
            }
            
            showNotification('Zalogowano pomyślnie!', 'success');
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Simulate login - in real app, validate credentials
            loginAsUser('user');
        });

        function logout() {
            currentUser = null;
            currentUserType = null;
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('workshopDashboard').classList.add('hidden');
            document.getElementById('mechanicDashboard').classList.add('hidden');
            showNotification('Wylogowano pomyślnie!', 'success');
        }

        // User Dashboard Functions
        function initUserDashboard() {
            showUserTab('map');
            initUserMap();
            startLocationSimulation();
        }

        function showUserTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.user-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.user-tab').forEach(tab => tab.classList.remove('border-b-2', 'border-blue-500'));
            
            // Show selected tab
            document.getElementById('user' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab').classList.remove('hidden');
            event.target.classList.add('border-b-2', 'border-blue-500');
        }

        function initUserMap() {
            if (userMap) {
                userMap.remove();
            }
            
            userMap = L.map('userMap').setView([52.2297, 21.0122], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(userMap);
            
            // User location
            const userMarker = L.marker([52.2297, 21.0122]).addTo(userMap)
                .bindPopup('Twoja lokalizacja').openPopup();
            
            // Workshop markers
            const workshops = [
                {lat: 52.2397, lng: 21.0222, name: 'Moto Serwis Pro', rating: 4.8},
                {lat: 52.2197, lng: 21.0322, name: 'Bike Expert', rating: 4.6},
                {lat: 52.2497, lng: 21.0022, name: 'Speed Motors', rating: 4.9}
            ];
            
            workshops.forEach(workshop => {
                L.marker([workshop.lat, workshop.lng])
                    .addTo(userMap)
                    .bindPopup(`<b>${workshop.name}</b><br>Ocena: ${workshop.rating}/5`);
            });
            
            // Other bikers
            const bikers = [
                {lat: 52.2397, lng: 21.0122, name: 'Anna K.'},
                {lat: 52.2197, lng: 21.0422, name: 'Piotr M.'},
                {lat: 52.2497, lng: 21.0222, name: 'Marek L.'}
            ];
            
            bikers.forEach(biker => {
                L.circleMarker([biker.lat, biker.lng], {color: 'green', radius: 5})
                    .addTo(userMap)
                    .bindPopup(`<b>${biker.name}</b><br>Motocyklista online`);
            });
        }

        function startLocationSimulation() {
            // Simulate real-time location updates
            setInterval(() => {
                updateLocationDisplay();
            }, 5000);
        }

        function updateLocationDisplay() {
            // Simulate speed changes
            const speeds = [45, 50, 65, 70, 55, 60];
            const speed = speeds[Math.floor(Math.random() * speeds.length)];
            document.querySelector('#userMapTab .text-xl.font-bold').textContent = speed + ' km/h';
        }

        // Workshop Dashboard Functions
        function initWorkshopDashboard() {
            showWorkshopTab('dashboard');
            initWorkshopChart();
        }

        function showWorkshopTab(tabName) {
            document.querySelectorAll('.workshop-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.workshop-tab').forEach(tab => tab.classList.remove('border-b-2', 'border-orange-500'));
            
            document.getElementById('workshop' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab').classList.remove('hidden');
            event.target.classList.add('border-b-2', 'border-orange-500');
        }

        function initWorkshopChart() {
            const ctx = document.getElementById('workshopChart').getContext('2d');
            workshopChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Pon', 'Wt', 'Śr', 'Czw', 'Pt', 'Sob'],
                    datasets: [{
                        label: 'Rezerwacje',
                        data: [5, 8, 6, 9, 7, 4],
                        borderColor: '#f97316',
                        backgroundColor: 'rgba(249, 115, 22, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Mechanic Dashboard Functions
        function initMechanicDashboard() {
            showMechanicTab('dashboard');
            initMechanicMap();
            initMechanicCharts();
        }

        function showMechanicTab(tabName) {
            document.querySelectorAll('.mechanic-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.mechanic-tab').forEach(tab => tab.classList.remove('border-b-2', 'border-red-500'));
            
            document.getElementById('mechanic' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab').classList.remove('hidden');
            event.target.classList.add('border-b-2', 'border-red-500');
        }

        function initMechanicMap() {
            if (mechanicMap) {
                mechanicMap.remove();
            }
            
            mechanicMap = L.map('mechanicMap').setView([52.2297, 21.0122], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mechanicMap);
            
            // Mechanic location
            L.marker([52.2297, 21.0122], {
                icon: L.divIcon({
                    html: '<i class="fas fa-user-cog text-red-600 text-xl"></i>',
                    iconSize: [20, 20],
                    className: 'custom-div-icon'
                })
            }).addTo(mechanicMap).bindPopup('Twoja lokalizacja');
            
            // Service requests
            const requests = [
                {lat: 52.2397, lng: 21.0222, client: 'Jan K.', problem: 'Problem z rozruchem'},
                {lat: 52.2197, lng: 21.0322, client: 'Anna M.', problem: 'Przebitka'}
            ];
            
            requests.forEach(request => {
                L.marker([request.lat, request.lng], {
                    icon: L.divIcon({
                        html: '<i class="fas fa-exclamation-triangle text-orange-600 text-xl"></i>',
                        iconSize: [20, 20],
                        className: 'custom-div-icon'
                    })
                }).addTo(mechanicMap).bindPopup(`<b>${request.client}</b><br>${request.problem}`);
            });
        }

        function initMechanicCharts() {
            // Earnings chart
            const earningsCtx = document.getElementById('mechanicEarningsChart').getContext('2d');
            mechanicEarningsChart = new Chart(earningsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Rano', 'Popołudnie', 'Wieczór'],
                    datasets: [{
                        data: [320, 350, 180],
                        backgroundColor: ['#ef4444', '#f97316', '#10b981']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Full earnings chart
            const fullEarningsCtx = document.getElementById('earningsChart');
            if (fullEarningsCtx) {
                earningsChart = new Chart(fullEarningsCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Pon', 'Wt', 'Śr', 'Czw', 'Pt', 'Sob', 'Nie'],
                        datasets: [{
                            label: 'Zarobki (PLN)',
                            data: [420, 680, 520, 750, 850, 640, 320],
                            backgroundColor: '#ef4444'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Services chart
            const servicesCtx = document.getElementById('servicesChart');
            if (servicesCtx) {
                servicesChart = new Chart(servicesCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Naprawa hamulców', 'Przebitki', 'Problemy elektryczne', 'Wymiana oleju', 'Inne'],
                        datasets: [{
                            data: [30, 25, 20, 15, 10],
                            backgroundColor: ['#ef4444', '#f97316', '#eab308', '#10b981', '#6366f1']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        // Modal Functions
        function showSOS() {
            document.getElementById('sosModal').classList.remove('hidden');
            document.getElementById('sosModal').classList.add('flex');
        }

        function closeSOSModal() {
            document.getElementById('sosModal').classList.add('hidden');
            document.getElementById('sosModal').classList.remove('flex');
        }

        function sendSOS() {
            closeSOSModal();
            showNotification('Wysłano sygnał SOS! Pomoc została powiadomiona.', 'success');
        }

        function bookWorkshop(workshopName) {
            document.getElementById('selectedWorkshop').value = workshopName;
            document.getElementById('bookingModal').classList.remove('hidden');
            document.getElementById('bookingModal').classList.add('flex');
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.add('hidden');
            document.getElementById('bookingModal').classList.remove('flex');
        }

        function submitBooking() {
            closeBookingModal();
            showNotification('Rezerwacja została wysłana! Warsztat skontaktuje się z Tobą.', 'success');
        }

        function callMechanic() {
            document.getElementById('mechanicModal').classList.remove('hidden');
            document.getElementById('mechanicModal').classList.add('flex');
        }

        function closeMechanicModal() {
            document.getElementById('mechanicModal').classList.add('hidden');
            document.getElementById('mechanicModal').classList.remove('flex');
        }

        function submitMechanicCall() {
            closeMechanicModal();
            showNotification('Wezwanie zostało wysłane! Mechanik skontaktuje się z Tobą w ciągu 15 minut.', 'success');
        }

        function acceptJob() {
            showNotification('Zlecenie zostało przyjęte! Klient otrzymał powiadomienie.', 'success');
            // Simulate job acceptance
            event.target.closest('.p-3').style.backgroundColor = '#f0f9ff';
            event.target.textContent = 'Przyjęte';
            event.target.disabled = true;
            event.target.classList.remove('bg-green-500', 'hover:bg-green-600');
            event.target.classList.add('bg-gray-400');
        }

        // Notification System
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification bg-white border-l-4 p-4 shadow-lg rounded-lg mb-4 ${
                type === 'success' ? 'border-green-500' : 
                type === 'error' ? 'border-red-500' : 
                'border-blue-500'
            }`;
            
            notification.innerHTML = `
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas ${
                            type === 'success' ? 'fa-check-circle text-green-500' : 
                            type === 'error' ? 'fa-exclamation-circle text-red-500' : 
                            'fa-info-circle text-blue-500'
                        }"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-gray-700">${message}</p>
                    </div>
                    <div class="ml-auto pl-3">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('notifications').appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // Event Listeners
        document.getElementById('sosButton').addEventListener('click', showSOS);
        
        document.getElementById('shareLocationBtn').addEventListener('click', function() {
            showNotification('Lokalizacja została udostępniona znajomym!', 'success');
            this.textContent = 'Udostępnione';
            this.classList.remove('bg-green-500', 'hover:bg-green-600');
            this.classList.add('bg-green-600');
        });

        // Availability toggle for mechanic
        document.getElementById('availability')?.addEventListener('change', function() {
            const label = this.nextElementSibling.querySelector('span');
            const dot = this.nextElementSibling.querySelector('.dot');
            
            if (this.checked) {
                label.textContent = 'Dostępny';
                dot.classList.add('translate-x-6');
                dot.classList.remove('bg-gray-400');
                dot.classList.add('bg-green-500');
                showNotification('Status zmieniony na: Dostępny', 'success');
            } else {
                label.textContent = 'Niedostępny';
                dot.classList.remove('translate-x-6');
                dot.classList.remove('bg-green-500');
                dot.classList.add('bg-gray-400');
                showNotification('Status zmieniony na: Niedostępny', 'info');
            }
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Show login screen by default
            showNotification('Witaj w BikeConnect Pro! Zaloguj się lub utwórz konto.', 'info');
        });

        // Simulated real-time updates
        setInterval(() => {
            if (currentUserType === 'mechanic') {
                // Simulate new job requests
                if (Math.random() > 0.7) {
                    showNotification('Nowe zlecenie w Twojej okolicy!', 'info');
                }
            }
        }, 30000);
    </script>
</body>
</html>


